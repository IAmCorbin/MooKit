<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
  <html xmlns="http://www.w3.org/1999/xhtml">
		<head>
			<!-- template designed by Marco Von Ballmoos -->
			<title>File Source for htmLawed1.1.9.1.php</title>
			<link rel="stylesheet" href="../media/stylesheet.css" />
						<meta http-equiv='Content-Type' content='text/html; charset=iso-8859-1'/>
		</head>
		<body>
						<h1>Source for file htmLawed1.1.9.1.php</h1>
<p>Documentation is available at <a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html">htmLawed1.1.9.1.php</a></p>
<div class="src-code">
<div class="src-code"><ol><li><div class="src-line"><a name="a1"></a><span class="src-php">&lt;?php</span></div></li>
<li><div class="src-line"><a name="a2"></a><span class="src-doc">/**</span></div></li>
<li><div class="src-line"><a name="a3"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;contains&nbsp;htmLawed&nbsp;V&nbsp;1.1.9.1,&nbsp;26</span></div></li>
<li><div class="src-line"><a name="a4"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;htmLawed&nbsp;1.1.9.1,&nbsp;26</span></div></li>
<li><div class="src-line"><a name="a5"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;</span><span class="src-doc-coretag">@copyright</span><span class="src-doc">&nbsp;February&nbsp;2010</span></div></li>
<li><div class="src-line"><a name="a6"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;</span><span class="src-doc-coretag">@author</span><span class="src-doc">&nbsp;Santosh&nbsp;Patnaik</span></div></li>
<li><div class="src-line"><a name="a7"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;&nbsp;LGPL&nbsp;v3&nbsp;license</span></div></li>
<li><div class="src-line"><a name="a8"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;&nbsp;A&nbsp;PHP&nbsp;Labware&nbsp;internal&nbsp;utility</span></div></li>
<li><div class="src-line"><a name="a9"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;</span><span class="src-doc-coretag">@link</span><span class="src-doc">&nbsp;www.bioinformatics.org/phplabware/internal_utilities/htmLawed</span></div></li>
<li><div class="src-line"><a name="a10"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;</span><span class="src-doc-coretag">@package</span><span class="src-doc">&nbsp;MooKit</span></div></li>
<li><div class="src-line"><a name="a11"></a><span class="src-doc">&nbsp;&nbsp;*/</span></div></li>
<li><div class="src-line"><a name="a12"></a><span class="src-doc">/**&nbsp;</span></div></li>
<li><div class="src-line"><a name="a13"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;htmLawed</span></div></li>
<li><div class="src-line"><a name="a14"></a><span class="src-doc">&nbsp;&nbsp;*&nbsp;</span><span class="src-doc-inlinetag">{@link&nbsp;www.bioinformatics.org/phplabware/internal_utilities/htmLawed}</span></div></li>
<li><div class="src-line"><a name="a15"></a><span class="src-doc">&nbsp;&nbsp;**/</span></div></li>
<li><div class="src-line"><a name="a15"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a16"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhtmLawed">htmLawed</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span>=<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-var">$S</span>=<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a17"></a><span class="src-var">$C&nbsp;</span>=&nbsp;<a href="http://www.php.net/is_array">is_array</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C&nbsp;</span>:&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a18"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'valid_xhtml'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a19"></a>&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'elements'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'elements'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-str">'*-center-dir-font-isindex-menu-s-strike-u'&nbsp;</span>:&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'elements'</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a20"></a>&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">2</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a21"></a>&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">2</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a22"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a23"></a><span class="src-comm">//&nbsp;config&nbsp;eles</span></div></li>
<li><div class="src-line"><a name="a24"></a><span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'abbr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'acronym'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'address'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'b'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'big'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'blockquote'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'caption'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'center'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cite'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'code'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'del'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dfn'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dir'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'em'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h1'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h2'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h3'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h4'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h5'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h6'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'i'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ins'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'kbd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'menu'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noscript'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pre'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'q'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rb'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rbc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rp'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rtc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ruby'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'s'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'samp'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'small'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'span'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'strike'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'strong'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sub'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'u'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'var'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;86/deprecated+embed+ruby</span></div></li>
<li><div class="src-line"><a name="a25"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'safe'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a26"></a>&nbsp;unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">[</span><span class="src-str">'applet'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">[</span><span class="src-str">'embed'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">[</span><span class="src-str">'iframe'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">[</span><span class="src-str">'object'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">[</span><span class="src-str">'script'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a27"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a28"></a><span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'elements'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\r&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\t&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'elements'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">'*'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a29"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$x&nbsp;</span>==&nbsp;<span class="src-str">'-*'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a30"></a><span class="src-key">elseif</span><span class="src-sym">(</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span><span class="src-str">'*'</span><span class="src-sym">)&nbsp;</span>===&nbsp;<span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$e&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_flip">array_flip</a><span class="src-sym">(</span><a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">','</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">))</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a31"></a><span class="src-key">else</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a32"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a33"></a>&nbsp;&nbsp;<a href="http://www.php.net/preg_match_all">preg_match_all</a><span class="src-sym">(</span><span class="src-str">'`(?:^|-|\+)[^\-+]+?(?=-|\+|$)`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">,&nbsp;</span><span class="src-id">PREG_SET_ORDER</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a34"></a>&nbsp;&nbsp;<span class="src-key">for</span><span class="src-sym">(</span><span class="src-var">$i</span>=<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>--<span class="src-var">$i</span>&gt;=<span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$m</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a35"></a>&nbsp;&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$m&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a36"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'+'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$e</span><span class="src-sym">[</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a37"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'-'&nbsp;</span>&amp;&amp;&nbsp;isset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">[</span><span class="src-sym">(</span><span class="src-var">$v&nbsp;</span>=&nbsp;<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span><a href="http://www.php.net/in_array">in_array</a><span class="src-sym">(</span><span class="src-str">'+'</span>.&nbsp;<span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">))</span><span class="src-sym">{</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">[</span><span class="src-var">$v</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a38"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a39"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a40"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a41"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'elements'</span><span class="src-sym">]&nbsp;</span>=<span class="src-sym">&amp;&nbsp;</span><span class="src-var">$e</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a42"></a><span class="src-comm">//&nbsp;config&nbsp;attrs</span></div></li>
<li><div class="src-line"><a name="a43"></a><span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'deny_attribute'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\r&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\t&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'deny_attribute'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a44"></a><span class="src-var">$x&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_flip">array_flip</a><span class="src-sym">((</span>isset<span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$x</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'*'</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">'-'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">)&nbsp;</span>:&nbsp;<a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">','</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span>.&nbsp;<span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'safe'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-str">',on*'&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">)))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a45"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">[</span><span class="src-str">'on*'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a46"></a>&nbsp;unset<span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">[</span><span class="src-str">'on*'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a47"></a>&nbsp;<span class="src-var">$x&nbsp;</span>+=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'onblur'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onchange'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onclick'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ondblclick'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onfocus'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onkeydown'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onkeypress'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onkeyup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmousedown'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmousemove'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmouseout'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmouseover'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmouseup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onreset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onselect'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onsubmit'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a48"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a49"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'deny_attribute'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$x</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a50"></a><span class="src-comm">//&nbsp;config&nbsp;URL</span></div></li>
<li><div class="src-line"><a name="a51"></a><span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-str">':'</span><span class="src-sym">))&nbsp;</span>?&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">'href:&nbsp;aim,&nbsp;feed,&nbsp;file,&nbsp;ftp,&nbsp;gopher,&nbsp;http,&nbsp;https,&nbsp;irc,&nbsp;mailto,&nbsp;news,&nbsp;nntp,&nbsp;sftp,&nbsp;ssh,&nbsp;telnet;&nbsp;*:file,&nbsp;http,&nbsp;https'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a52"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a53"></a><span class="src-key">foreach</span><span class="src-sym">(</span><a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">';'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\t&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\r&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">))&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a54"></a>&nbsp;<span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-var">$x2&nbsp;</span>=&nbsp;<span class="src-id">null</span><span class="src-sym">;&nbsp;</span>list<span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x2</span><span class="src-sym">)&nbsp;</span>=&nbsp;<a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">':'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-num">2</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a55"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$x2</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_flip">array_flip</a><span class="src-sym">(</span><a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">','</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x2</span><span class="src-sym">))</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a56"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a57"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'*'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'*'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'file'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'http'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'https'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a58"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'safe'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'style'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'style'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'nil'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a59"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'abs_url'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'abs_url'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'abs_url'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a60"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">!</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^[a-zA-Z\d.+\-]+://[^/]+/(.+?/)?$`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a61"></a>&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'abs_url'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a62"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a63"></a><span class="src-comm">//&nbsp;config&nbsp;rest</span></div></li>
<li><div class="src-line"><a name="a64"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'and_mark'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'and_mark'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">0&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a65"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/is_array">is_array</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>==&nbsp;<span class="src-num">2&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_regex">hl_regex</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_regex">hl_regex</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">)))&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a66"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_mail_spam'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_mail_spam'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_mail_spam'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a67"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'balance'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'balance'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;(bool)<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'balance'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a68"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'safe'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">3&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a69"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'clean_ms_char'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'clean_ms_char'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">0&nbsp;</span>:&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'clean_ms_char'</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a70"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'safe'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">3&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a71"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'css_expression'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'css_expression'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">0&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a72"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hexdec_entity'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hexdec_entity'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hexdec_entity'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a73"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/function_exists">function_exists</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook'</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a74"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook_tag'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook_tag'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/function_exists">function_exists</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook_tag'</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook_tag'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a75"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'keep_bad'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'keep_bad'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'keep_bad'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">6</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a76"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'lc_std_val'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'lc_std_val'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;(bool)<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'lc_std_val'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a77"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a78"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'named_entity'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'named_entity'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;(bool)<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'named_entity'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a79"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'no_deprecated_attr'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'no_deprecated_attr'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'no_deprecated_attr'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a80"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'parent'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'parent'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'parent'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">'body'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a81"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'show_setting'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'show_setting'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'show_setting'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a82"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'style_pass'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'style_pass'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">0&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a83"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'tidy'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'tidy'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">0&nbsp;</span>:&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'tidy'</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a84"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'unique_ids'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'unique_ids'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'unique_ids'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a85"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a86"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a87"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'C'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$reC&nbsp;</span>=&nbsp;<span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'C'</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a88"></a><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'C'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a89"></a><span class="src-var">$S&nbsp;</span>=&nbsp;<a href="http://www.php.net/is_array">is_array</a><span class="src-sym">(</span><span class="src-var">$S</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$S&nbsp;</span>:&nbsp;<a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_spec">hl_spec</a><span class="src-sym">(</span><span class="src-var">$S</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a90"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'S'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$reS&nbsp;</span>=&nbsp;<span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'S'</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a91"></a><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'S'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$S</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a92"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a93"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`[\x00-\x08\x0b-\x0c\x0e-\x1f]`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a94"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'clean_ms_char'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a95"></a>&nbsp;<span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\x7f&quot;</span>=&gt;<span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x80&quot;</span>=&gt;<span class="src-str">'&amp;#8364;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x81&quot;</span>=&gt;<span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x83&quot;</span>=&gt;<span class="src-str">'&amp;#402;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x85&quot;</span>=&gt;<span class="src-str">'&amp;#8230;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x86&quot;</span>=&gt;<span class="src-str">'&amp;#8224;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x87&quot;</span>=&gt;<span class="src-str">'&amp;#8225;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x88&quot;</span>=&gt;<span class="src-str">'&amp;#710;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x89&quot;</span>=&gt;<span class="src-str">'&amp;#8240;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x8a&quot;</span>=&gt;<span class="src-str">'&amp;#352;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x8b&quot;</span>=&gt;<span class="src-str">'&amp;#8249;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x8c&quot;</span>=&gt;<span class="src-str">'&amp;#338;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x8d&quot;</span>=&gt;<span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x8e&quot;</span>=&gt;<span class="src-str">'&amp;#381;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x8f&quot;</span>=&gt;<span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x90&quot;</span>=&gt;<span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x95&quot;</span>=&gt;<span class="src-str">'&amp;#8226;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x96&quot;</span>=&gt;<span class="src-str">'&amp;#8211;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x97&quot;</span>=&gt;<span class="src-str">'&amp;#8212;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x98&quot;</span>=&gt;<span class="src-str">'&amp;#732;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x99&quot;</span>=&gt;<span class="src-str">'&amp;#8482;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x9a&quot;</span>=&gt;<span class="src-str">'&amp;#353;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x9b&quot;</span>=&gt;<span class="src-str">'&amp;#8250;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x9c&quot;</span>=&gt;<span class="src-str">'&amp;#339;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x9d&quot;</span>=&gt;<span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x9e&quot;</span>=&gt;<span class="src-str">'&amp;#382;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x9f&quot;</span>=&gt;<span class="src-str">'&amp;#376;'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a96"></a>&nbsp;<span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-var">$x&nbsp;</span>+&nbsp;<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'clean_ms_char'</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-num">1&nbsp;</span>?&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\x82&quot;</span>=&gt;<span class="src-str">'&amp;#8218;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x84&quot;</span>=&gt;<span class="src-str">'&amp;#8222;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x91&quot;</span>=&gt;<span class="src-str">'&amp;#8216;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x92&quot;</span>=&gt;<span class="src-str">'&amp;#8217;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x93&quot;</span>=&gt;<span class="src-str">'&amp;#8220;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x94&quot;</span>=&gt;<span class="src-str">'&amp;#8221;'</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\x82&quot;</span>=&gt;<span class="src-str">'\''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x84&quot;</span>=&gt;<span class="src-str">'&quot;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x91&quot;</span>=&gt;<span class="src-str">'\''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x92&quot;</span>=&gt;<span class="src-str">'\''</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x93&quot;</span>=&gt;<span class="src-str">'&quot;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x94&quot;</span>=&gt;<span class="src-str">'&quot;'</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a97"></a>&nbsp;<span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/strtr">strtr</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a98"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a99"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace_callback">preg_replace_callback</a><span class="src-sym">(</span><span class="src-str">'`&lt;!(?:(?:--.*?--)|(?:\[CDATA\[.*?\]\]))&gt;`sm'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hl_cmtcd'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a100"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace_callback">preg_replace_callback</a><span class="src-sym">(</span><span class="src-str">'`&amp;amp;([A-Za-z][A-Za-z0-9]{1,30}|#(?:[0-9]{1,8}|[Xx][0-9A-Fa-f]{1,7}));`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hl_ent'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">'&amp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;amp;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a101"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'unique_ids'</span><span class="src-sym">]&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'hl_Ids'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'hl_Ids'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a102"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook'</span><span class="src-sym">]</span><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">,&nbsp;</span><span class="src-var">$S</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a103"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'show_setting'</span><span class="src-sym">]&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^[a-z][a-z0-9_]*$`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'show_setting'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a104"></a>&nbsp;<span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'show_setting'</span><span class="src-sym">]]&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'config'</span>=&gt;<span class="src-var">$C</span><span class="src-sym">,&nbsp;</span><span class="src-str">'spec'</span>=&gt;<span class="src-var">$S</span><span class="src-sym">,&nbsp;</span><span class="src-str">'time'</span>=&gt;<a href="http://www.php.net/microtime">microtime</a><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a105"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a106"></a><span class="src-comm">//&nbsp;main</span></div></li>
<li><div class="src-line"><a name="a107"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace_callback">preg_replace_callback</a><span class="src-sym">(</span><span class="src-str">'`&lt;(?:(?:\s|$)|(?:[^&gt;]*(?:&gt;|$)))|&gt;`m'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hl_tag'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a108"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'balance'</span><span class="src-sym">]&nbsp;</span>?&nbsp;<a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_bal">hl_bal</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'keep_bad'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'parent'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$t</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a109"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-sym">((</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x01&quot;</span><span class="src-sym">)&nbsp;</span>!==&nbsp;<span class="src-id">false</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\x01&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x02&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x03&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x04&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x05&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$t</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a110"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'tidy'</span><span class="src-sym">]&nbsp;</span>?&nbsp;<a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_tidy">hl_tidy</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'tidy'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'parent'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$t</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a111"></a>unset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a112"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$reC</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'C'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$reC</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a113"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$reS</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'S'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$reS</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a114"></a><span class="src-key">return&nbsp;</span><span class="src-var">$t</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a115"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a116"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a117"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a118"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_attrval">hl_attrval</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a119"></a><span class="src-comm">//&nbsp;check&nbsp;attr&nbsp;val&nbsp;against&nbsp;$S</span></div></li>
<li><div class="src-line"><a name="a120"></a><span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-var">$l&nbsp;</span>=&nbsp;<a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a121"></a><span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$p&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$k</span>=&gt;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a122"></a>&nbsp;<span class="src-key">switch</span><span class="src-sym">(</span><span class="src-var">$k</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a123"></a>&nbsp;&nbsp;<span class="src-key">case&nbsp;</span><span class="src-str">'maxlen'</span>:<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$l&nbsp;</span>&gt;&nbsp;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a124"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-str">'minlen'</span>:&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$l&nbsp;</span>&lt;&nbsp;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a125"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-str">'maxval'</span>:&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>(float)<span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>&gt;&nbsp;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a126"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-str">'minval'</span>:&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>(float)<span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>&lt;&nbsp;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a127"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-str">'match'</span>:&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a128"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-str">'nomatch'</span>:&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a129"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-str">'oneof'</span>:</div></li>
<li><div class="src-line"><a name="a130"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$m&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a131"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">'|'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t&nbsp;</span>==&nbsp;<span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$m&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-key">break</span><span class="src-sym">;</span><span class="src-sym">}}</span></div></li>
<li><div class="src-line"><a name="a132"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-var">$m</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a133"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-str">'noneof'</span>:</div></li>
<li><div class="src-line"><a name="a134"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$m&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a135"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">'|'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t&nbsp;</span>==&nbsp;<span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$m&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;&nbsp;</span><span class="src-key">break</span><span class="src-sym">;</span><span class="src-sym">}}</span></div></li>
<li><div class="src-line"><a name="a136"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$o&nbsp;</span>=&nbsp;<span class="src-var">$m</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a137"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">default</span>:</div></li>
<li><div class="src-line"><a name="a138"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a139"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a140"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$o</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">break</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a141"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a142"></a><span class="src-key">return&nbsp;</span><span class="src-sym">(</span><span class="src-var">$o&nbsp;</span>?&nbsp;<span class="src-var">$t&nbsp;</span>:&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">[</span><span class="src-str">'default'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$p</span><span class="src-sym">[</span><span class="src-str">'default'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a143"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a144"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a145"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a146"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_bal">hl_bal</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$do</span>=<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-var">$in</span>=<span class="src-str">'div'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a147"></a><span class="src-comm">//&nbsp;balance&nbsp;tags</span></div></li>
<li><div class="src-line"><a name="a148"></a><span class="src-comm">//&nbsp;by&nbsp;content</span></div></li>
<li><div class="src-line"><a name="a149"></a><span class="src-var">$cB&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'blockquote'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noscript'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Block</span></div></li>
<li><div class="src-line"><a name="a150"></a><span class="src-var">$cE&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Empty</span></div></li>
<li><div class="src-line"><a name="a151"></a><span class="src-var">$cF&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'del'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ins'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noscript'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Flow;&nbsp;later&nbsp;context-wise&nbsp;dynamic&nbsp;move&nbsp;of&nbsp;ins&nbsp;&amp;&nbsp;del&nbsp;to&nbsp;$cI</span></div></li>
<li><div class="src-line"><a name="a152"></a><span class="src-var">$cI&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'abbr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'acronym'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'address'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'b'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'big'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'caption'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cite'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'code'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dfn'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'em'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h1'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h2'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h3'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h4'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h5'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h6'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'i'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'kbd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pre'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'q'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rb'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'s'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'samp'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'small'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'span'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'strike'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'strong'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sub'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'u'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'var'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Inline</span></div></li>
<li><div class="src-line"><a name="a153"></a><span class="src-var">$cN&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noscript'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pre'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'big'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'small'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sub'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rb'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'ruby'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rt'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'ruby'</span>=&gt;<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Illegal</span></div></li>
<li><div class="src-line"><a name="a154"></a><span class="src-var">$cN2&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_keys">array_keys</a><span class="src-sym">(</span><span class="src-var">$cN</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a155"></a><span class="src-var">$cR&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'blockquote'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dir'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'menu'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noscript'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rbc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rtc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ruby'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a156"></a><span class="src-var">$cS&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dir'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'li'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dl'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'dd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'menu'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'#pcdata'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rbc'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'rb'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rp'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'#pcdata'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rtc'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'rt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ruby'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'rb'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rbc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rp'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rtc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'#pcdata'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'caption'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'#pcdata'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Specific&nbsp;-&nbsp;immediate&nbsp;parent-child</span></div></li>
<li><div class="src-line"><a name="a157"></a><span class="src-var">$cO&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'address'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'applet'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'blockquote'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'#pcdata'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Other</span></div></li>
<li><div class="src-line"><a name="a158"></a><span class="src-var">$cT&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Omitable&nbsp;closing</span></div></li>
<li><div class="src-line"><a name="a159"></a><span class="src-comm">//&nbsp;block/inline&nbsp;type;&nbsp;ins&nbsp;&amp;&nbsp;del&nbsp;both&nbsp;type;&nbsp;#pcdata:&nbsp;text</span></div></li>
<li><div class="src-line"><a name="a160"></a><span class="src-var">$eB&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'address'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'blockquote'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'center'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'del'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dir'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ins'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h1'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h2'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h3'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h4'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h5'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h6'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'menu'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noscript'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pre'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a161"></a><span class="src-var">$eI&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'#pcdata'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'abbr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'acronym'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'b'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'big'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cite'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'code'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'del'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dfn'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'em'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'i'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ins'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'kbd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'q'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ruby'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'s'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'samp'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'small'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'span'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'strike'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'strong'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sub'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'u'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'var'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a162"></a><span class="src-var">$eN&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'big'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ruby'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'small'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sub'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Exclude&nbsp;from&nbsp;specific&nbsp;ele;&nbsp;$cN&nbsp;values</span></div></li>
<li><div class="src-line"><a name="a163"></a><span class="src-var">$eO&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'caption'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rb'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rbc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rp'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rtc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Missing&nbsp;in&nbsp;$eB&nbsp;&amp;&nbsp;$eI</span></div></li>
<li><div class="src-line"><a name="a164"></a><span class="src-var">$eF&nbsp;</span>=&nbsp;<span class="src-var">$eB&nbsp;</span>+&nbsp;<span class="src-var">$eI</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a165"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a166"></a><span class="src-comm">//&nbsp;$in&nbsp;sets&nbsp;allowed&nbsp;child</span></div></li>
<li><div class="src-line"><a name="a167"></a><span class="src-var">$in&nbsp;</span>=&nbsp;<span class="src-sym">((</span>isset<span class="src-sym">(</span><span class="src-var">$eF</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$in&nbsp;</span>!=&nbsp;<span class="src-str">'#pcdata'</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span>isset<span class="src-sym">(</span><span class="src-var">$eO</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>?&nbsp;<span class="src-var">$in&nbsp;</span>:&nbsp;<span class="src-str">'div'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a168"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cE</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a169"></a>&nbsp;<span class="src-key">return&nbsp;</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$do&nbsp;</span>?&nbsp;<span class="src-str">''&nbsp;</span>:&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a170"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a171"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cS</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$inOk&nbsp;</span>=&nbsp;<span class="src-var">$cS</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a172"></a><span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$inOk&nbsp;</span>=&nbsp;<span class="src-var">$eI</span><span class="src-sym">;&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a173"></a><span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cF</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$inOk&nbsp;</span>=&nbsp;<span class="src-var">$eF</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a174"></a><span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cB</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$inOk&nbsp;</span>=&nbsp;<span class="src-var">$eB</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a175"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cO</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$inOk&nbsp;</span>=&nbsp;<span class="src-var">$inOk&nbsp;</span>+&nbsp;<span class="src-var">$cO</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a176"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cN</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$inOk&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_diff_assoc">array_diff_assoc</a><span class="src-sym">(</span><span class="src-var">$inOk</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cN</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a177"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a178"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a179"></a><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$q&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;$q&nbsp;seq&nbsp;list&nbsp;of&nbsp;open&nbsp;non-empty&nbsp;ele</span></div></li>
<li><div class="src-line"><a name="a180"></a><a href="http://www.php.net/ob_start">ob_start</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a181"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a182"></a><span class="src-key">for</span><span class="src-sym">(</span><span class="src-var">$i</span>=-<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-var">$ci</span>=<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>++<span class="src-var">$i</span>&lt;<span class="src-var">$ci</span><span class="src-sym">;</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a183"></a>&nbsp;<span class="src-comm">//&nbsp;allowed&nbsp;$ok&nbsp;in&nbsp;parent&nbsp;$p</span></div></li>
<li><div class="src-line"><a name="a184"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$ql&nbsp;</span>=&nbsp;<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a185"></a>&nbsp;&nbsp;<span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_pop">array_pop</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a186"></a>&nbsp;&nbsp;<span class="src-var">$q</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$p</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a187"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cS</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$cS</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a188"></a>&nbsp;&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$eI</span><span class="src-sym">;&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a189"></a>&nbsp;&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cF</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$eF</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a190"></a>&nbsp;&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cB</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$eB</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a191"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cO</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$ok&nbsp;</span>+&nbsp;<span class="src-var">$cO</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a192"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cN</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_diff_assoc">array_diff_assoc</a><span class="src-sym">(</span><span class="src-var">$ok</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cN</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a193"></a>&nbsp;<span class="src-sym">}</span><span class="src-key">else</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$inOk</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a194"></a>&nbsp;<span class="src-comm">//&nbsp;bad&nbsp;tags,&nbsp;&amp;&nbsp;ele&nbsp;content</span></div></li>
<li><div class="src-line"><a name="a195"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>==&nbsp;<span class="src-num">1&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ok</span><span class="src-sym">[</span><span class="src-str">'#pcdata'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>==&nbsp;<span class="src-num">3&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$do&nbsp;</span>==&nbsp;<span class="src-num">5</span><span class="src-sym">))))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a196"></a>&nbsp;&nbsp;echo&nbsp;<span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a197"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a198"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a199"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>&lt;&nbsp;<span class="src-num">3&nbsp;</span><span class="src-key">or&nbsp;</span>isset<span class="src-sym">(</span><span class="src-var">$ok</span><span class="src-sym">[</span><span class="src-str">'#pcdata'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span>echo&nbsp;<span class="src-var">$x</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a200"></a>&nbsp;&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x02\x04&quot;</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a201"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><a href="http://www.php.net/preg_split">preg_split</a><span class="src-sym">(</span><span class="src-str">'`(\x01\x02[^\x01\x02]+\x02\x01)`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span>-<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-id">PREG_SPLIT_DELIM_CAPTURE&nbsp;</span>|&nbsp;<span class="src-id">PREG_SPLIT_NO_EMPTY</span><span class="src-sym">)&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a202"></a>&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;<span class="src-sym">(</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-num">2</span><span class="src-sym">)&nbsp;</span>==&nbsp;<span class="src-str">&quot;\x01\x02&quot;&nbsp;</span>?&nbsp;<span class="src-var">$v&nbsp;</span>:&nbsp;<span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>&gt;&nbsp;<span class="src-num">4&nbsp;</span>?&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`\S`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a203"></a>&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a204"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>&gt;&nbsp;<span class="src-num">4</span><span class="src-sym">)</span><span class="src-sym">{</span>echo&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`\S`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a205"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a206"></a>&nbsp;<span class="src-comm">//&nbsp;get&nbsp;markup</span></div></li>
<li><div class="src-line"><a name="a207"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^(/?)([a-zA-Z1-6]+)([^&gt;]*)&gt;(.*)`sm'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$r</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-var">$t</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a208"></a>&nbsp;<span class="src-var">$s&nbsp;</span>=&nbsp;<span class="src-id">null</span><span class="src-sym">;&nbsp;</span><span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-id">null</span><span class="src-sym">;&nbsp;</span><span class="src-var">$a&nbsp;</span>=&nbsp;<span class="src-id">null</span><span class="src-sym">;&nbsp;</span><span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-id">null</span><span class="src-sym">;&nbsp;</span>list<span class="src-sym">(</span><span class="src-var">$all</span><span class="src-sym">,&nbsp;</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">)&nbsp;</span>=&nbsp;<span class="src-var">$r</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a209"></a>&nbsp;<span class="src-comm">//&nbsp;close&nbsp;tag</span></div></li>
<li><div class="src-line"><a name="a210"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a211"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cE</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">!</span><a href="http://www.php.net/in_array">in_array</a><span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$q</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}&nbsp;</span><span class="src-comm">//&nbsp;Empty/unopen</span></div></li>
<li><div class="src-line"><a name="a212"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$p&nbsp;</span>==&nbsp;<span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">{</span><a href="http://www.php.net/array_pop">array_pop</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>echo&nbsp;<span class="src-str">'&lt;/'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}&nbsp;</span><span class="src-comm">//&nbsp;Last&nbsp;open</span></div></li>
<li><div class="src-line"><a name="a213"></a>&nbsp;&nbsp;<span class="src-var">$add&nbsp;</span>=&nbsp;<span class="src-str">''</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Nesting&nbsp;-&nbsp;close&nbsp;open&nbsp;tags&nbsp;that&nbsp;need&nbsp;to&nbsp;be</span></div></li>
<li><div class="src-line"><a name="a214"></a>&nbsp;&nbsp;<span class="src-key">for</span><span class="src-sym">(</span><span class="src-var">$j</span>=-<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cj</span>=<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>++<span class="src-var">$j</span>&lt;<span class="src-var">$cj</span><span class="src-sym">;</span><span class="src-sym">)</span><span class="src-sym">{&nbsp;&nbsp;</span></div></li>
<li><div class="src-line"><a name="a215"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">((</span><span class="src-var">$d&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_pop">array_pop</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">))&nbsp;</span>==&nbsp;<span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">break</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a216"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">else</span><span class="src-sym">{</span><span class="src-var">$add&nbsp;</span>.=&nbsp;<span class="src-str">&quot;</span><span class="src-str">&lt;/{<span class="src-var">$d</span><span class="src-sym">}</span>&gt;</span><span class="src-str">&quot;</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a217"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a218"></a>&nbsp;&nbsp;echo&nbsp;<span class="src-var">$add</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&lt;/'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a219"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a220"></a>&nbsp;<span class="src-comm">//&nbsp;open&nbsp;tag</span></div></li>
<li><div class="src-line"><a name="a221"></a>&nbsp;<span class="src-comm">//&nbsp;$cB&nbsp;ele&nbsp;needs&nbsp;$eB&nbsp;ele&nbsp;as&nbsp;child</span></div></li>
<li><div class="src-line"><a name="a222"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cB</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">)))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a223"></a>&nbsp;&nbsp;<span class="src-var">$t</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span>{<span class="src-var">$e</span><span class="src-str"></span><span class="src-sym">}</span>{<span class="src-var">$a</span><span class="src-sym">}</span>&gt;</span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a224"></a>&nbsp;&nbsp;<a href="http://www.php.net/array_splice">array_splice</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$i</span>+<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div&gt;'</span>.&nbsp;<span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>++<span class="src-var">$ci</span><span class="src-sym">;&nbsp;</span>--<span class="src-var">$i</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a225"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a226"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(((</span><span class="src-var">$ql&nbsp;</span>&amp;&amp;&nbsp;isset<span class="src-sym">(</span><span class="src-var">$cB</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cB</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span><span class="src-var">$ql</span><span class="src-sym">))&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$eB</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$ok</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a227"></a>&nbsp;&nbsp;<a href="http://www.php.net/array_splice">array_splice</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$i</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div&gt;'</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>++<span class="src-var">$ci</span><span class="src-sym">;&nbsp;</span>--<span class="src-var">$i</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a228"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a229"></a>&nbsp;<span class="src-comm">//&nbsp;if&nbsp;no&nbsp;open&nbsp;ele,&nbsp;$in&nbsp;=&nbsp;parent;&nbsp;mostly&nbsp;immediate&nbsp;parent-child&nbsp;relation&nbsp;should&nbsp;hold</span></div></li>
<li><div class="src-line"><a name="a230"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$ql&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$eN</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">!</span><a href="http://www.php.net/array_intersect">array_intersect</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cN2</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a231"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$ok</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a232"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$ql&nbsp;</span>&amp;&amp;&nbsp;isset<span class="src-sym">(</span><span class="src-var">$cT</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span>echo&nbsp;<span class="src-str">'&lt;/'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/array_pop">array_pop</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>--<span class="src-var">$i</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a233"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a234"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a235"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$cE</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$q</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$e</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a236"></a>&nbsp;&nbsp;echo&nbsp;<span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a237"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a238"></a>&nbsp;<span class="src-comm">//&nbsp;specific&nbsp;parent-child</span></div></li>
<li><div class="src-line"><a name="a239"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cS</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a240"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$cE</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$q</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$e</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a241"></a>&nbsp;&nbsp;echo&nbsp;<span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a242"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a243"></a>&nbsp;<span class="src-comm">//&nbsp;nesting</span></div></li>
<li><div class="src-line"><a name="a244"></a>&nbsp;<span class="src-var">$add&nbsp;</span>=&nbsp;<span class="src-str">''</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a245"></a>&nbsp;<span class="src-var">$q2&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a246"></a>&nbsp;<span class="src-key">for</span><span class="src-sym">(</span><span class="src-var">$k</span>=-<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-var">$kc</span>=<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>++<span class="src-var">$k</span>&lt;<span class="src-var">$kc</span><span class="src-sym">;</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a247"></a>&nbsp;&nbsp;<span class="src-var">$d&nbsp;</span>=&nbsp;<span class="src-var">$q</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a248"></a>&nbsp;&nbsp;<span class="src-var">$ok2&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a249"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cS</span><span class="src-sym">[</span><span class="src-var">$d</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$q2</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$d</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a250"></a>&nbsp;&nbsp;<span class="src-var">$ok2&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-var">$d</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$eI&nbsp;</span>:&nbsp;<span class="src-var">$eF</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a251"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cO</span><span class="src-sym">[</span><span class="src-var">$d</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok2&nbsp;</span>=&nbsp;<span class="src-var">$ok2&nbsp;</span>+&nbsp;<span class="src-var">$cO</span><span class="src-sym">[</span><span class="src-var">$d</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a252"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cN</span><span class="src-sym">[</span><span class="src-var">$d</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok2&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_diff_assoc">array_diff_assoc</a><span class="src-sym">(</span><span class="src-var">$ok2</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cN</span><span class="src-sym">[</span><span class="src-var">$d</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a253"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$ok2</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a254"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$k&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$inOk</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">continue&nbsp;</span><span class="src-num">2</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a255"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$add&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span><span class="src-str">&lt;/{<span class="src-var">$d</span><span class="src-sym">}</span>&gt;</span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a256"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">for</span><span class="src-sym">(</span><span class="src-sym">;</span>++<span class="src-var">$k</span>&lt;<span class="src-var">$kc</span><span class="src-sym">;</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$add&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span><span class="src-str">&lt;/{<span class="src-var">$q</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">}</span>&gt;{<span class="src-var">$add</span><span class="src-sym">}</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a257"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a258"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a259"></a>&nbsp;&nbsp;<span class="src-key">else</span><span class="src-sym">{</span><span class="src-var">$q2</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$d</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a260"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a261"></a>&nbsp;<span class="src-var">$q&nbsp;</span>=&nbsp;<span class="src-var">$q2</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a262"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$cE</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$q</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$e</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a263"></a>&nbsp;echo&nbsp;<span class="src-var">$add</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a264"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a265"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a266"></a><span class="src-comm">//&nbsp;end</span></div></li>
<li><div class="src-line"><a name="a267"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$ql&nbsp;</span>=&nbsp;<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a268"></a>&nbsp;<span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_pop">array_pop</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a269"></a>&nbsp;<span class="src-var">$q</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$p</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a270"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cS</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$cS</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a271"></a>&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$eI</span><span class="src-sym">;&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a272"></a>&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cF</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$eF</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a273"></a>&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cB</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$eB</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a274"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cO</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$ok&nbsp;</span>+&nbsp;<span class="src-var">$cO</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a275"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cN</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_diff_assoc">array_diff_assoc</a><span class="src-sym">(</span><span class="src-var">$ok</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cN</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a276"></a><span class="src-sym">}</span><span class="src-key">else</span><span class="src-sym">{</span><span class="src-var">$ok&nbsp;</span>=&nbsp;<span class="src-var">$inOk</span><span class="src-sym">;&nbsp;</span>unset<span class="src-sym">(</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'del'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$cI</span><span class="src-sym">[</span><span class="src-str">'ins'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a277"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>==&nbsp;<span class="src-num">1&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ok</span><span class="src-sym">[</span><span class="src-str">'#pcdata'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>==&nbsp;<span class="src-num">3&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$do&nbsp;</span>==&nbsp;<span class="src-num">5</span><span class="src-sym">))))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a278"></a>&nbsp;echo&nbsp;<span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a279"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a280"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a281"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">))&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">((</span><span class="src-var">$ql&nbsp;</span>&amp;&amp;&nbsp;isset<span class="src-sym">(</span><span class="src-var">$cB</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$cB</span><span class="src-sym">[</span><span class="src-var">$in</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span><span class="src-var">$ql</span><span class="src-sym">)))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a282"></a>&nbsp;&nbsp;echo&nbsp;<span class="src-str">'&lt;div&gt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&lt;/div&gt;'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a283"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a284"></a>&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>&lt;&nbsp;<span class="src-num">3&nbsp;</span><span class="src-key">or&nbsp;</span>isset<span class="src-sym">(</span><span class="src-var">$ok</span><span class="src-sym">[</span><span class="src-str">'#pcdata'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span>echo&nbsp;<span class="src-var">$x</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a285"></a>&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x02\x04&quot;</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a286"></a>&nbsp;&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><a href="http://www.php.net/preg_split">preg_split</a><span class="src-sym">(</span><span class="src-str">'`(\x01\x02[^\x01\x02]+\x02\x01)`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span>-<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-id">PREG_SPLIT_DELIM_CAPTURE&nbsp;</span>|&nbsp;<span class="src-id">PREG_SPLIT_NO_EMPTY</span><span class="src-sym">)&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a287"></a>&nbsp;&nbsp;&nbsp;echo&nbsp;<span class="src-sym">(</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-num">2</span><span class="src-sym">)&nbsp;</span>==&nbsp;<span class="src-str">&quot;\x01\x02&quot;&nbsp;</span>?&nbsp;<span class="src-var">$v&nbsp;</span>:&nbsp;<span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>&gt;&nbsp;<span class="src-num">4&nbsp;</span>?&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`\S`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a288"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a289"></a>&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$do&nbsp;</span>&gt;&nbsp;<span class="src-num">4</span><span class="src-sym">)</span><span class="src-sym">{</span>echo&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`\S`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a290"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a291"></a><span class="src-key">while</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>=&nbsp;<a href="http://www.php.net/array_pop">array_pop</a><span class="src-sym">(</span><span class="src-var">$q</span><span class="src-sym">)))</span><span class="src-sym">{</span>echo&nbsp;<span class="src-str">'&lt;/'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a292"></a><span class="src-var">$o&nbsp;</span>=&nbsp;<a href="http://www.php.net/ob_get_contents">ob_get_contents</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a293"></a><a href="http://www.php.net/ob_end_clean">ob_end_clean</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a294"></a><span class="src-key">return&nbsp;</span><span class="src-var">$o</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a295"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a296"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a297"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a298"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_cmtcd">hl_cmtcd</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a299"></a><span class="src-comm">//&nbsp;comment/CDATA&nbsp;sec&nbsp;handler</span></div></li>
<li><div class="src-line"><a name="a300"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-var">$t</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a301"></a><span class="src-key">global&nbsp;</span><span class="src-var">$C</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a302"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">[</span><span class="src-num">3</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'-'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a303"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-var">$t</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a304"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-str">''</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a305"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">((</span><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`--+`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'-'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-num">4</span><span class="src-sym">,&nbsp;</span>-<span class="src-num">3</span><span class="src-sym">)))</span><span class="src-sym">,&nbsp;</span>-<span class="src-num">1</span><span class="src-sym">)&nbsp;</span>!=&nbsp;<span class="src-str">'&nbsp;'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$t&nbsp;</span>.=&nbsp;<span class="src-str">'&nbsp;'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a306"></a>&nbsp;<span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-num">2&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;amp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$t</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a307"></a>&nbsp;<span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span><span class="src-str">\x01\x02\x04!--<span class="src-var">$t</span>--\x05\x02\x01</span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a308"></a><span class="src-sym">}</span><span class="src-key">else</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;CDATA</span></div></li>
<li><div class="src-line"><a name="a309"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-var">$t</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a310"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-str">''</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a311"></a>&nbsp;<span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">,&nbsp;</span>-<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a312"></a>&nbsp;<span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-num">2&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;amp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$t</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a313"></a>&nbsp;<span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span><span class="src-str">\x01\x01\x04<span class="src-var">$t</span>\x05\x01\x01</span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a314"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a315"></a><span class="src-key">return&nbsp;</span><a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\x03&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x04&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x05&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a316"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a317"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a318"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a319"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_ent">hl_ent</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a320"></a><span class="src-comm">//&nbsp;entitity&nbsp;handler</span></div></li>
<li><div class="src-line"><a name="a321"></a><span class="src-key">global&nbsp;</span><span class="src-var">$C</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a322"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-var">$t</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a323"></a><span class="src-key">static&nbsp;</span><span class="src-var">$U&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'quot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,</span><span class="src-str">'amp'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,</span><span class="src-str">'lt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,</span><span class="src-str">'gt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a324"></a><span class="src-key">static&nbsp;</span><span class="src-var">$N&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'fnof'</span>=&gt;<span class="src-str">'402'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Alpha'</span>=&gt;<span class="src-str">'913'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Beta'</span>=&gt;<span class="src-str">'914'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Gamma'</span>=&gt;<span class="src-str">'915'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Delta'</span>=&gt;<span class="src-str">'916'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Epsilon'</span>=&gt;<span class="src-str">'917'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Zeta'</span>=&gt;<span class="src-str">'918'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Eta'</span>=&gt;<span class="src-str">'919'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Theta'</span>=&gt;<span class="src-str">'920'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Iota'</span>=&gt;<span class="src-str">'921'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Kappa'</span>=&gt;<span class="src-str">'922'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Lambda'</span>=&gt;<span class="src-str">'923'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Mu'</span>=&gt;<span class="src-str">'924'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Nu'</span>=&gt;<span class="src-str">'925'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Xi'</span>=&gt;<span class="src-str">'926'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Omicron'</span>=&gt;<span class="src-str">'927'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Pi'</span>=&gt;<span class="src-str">'928'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Rho'</span>=&gt;<span class="src-str">'929'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Sigma'</span>=&gt;<span class="src-str">'931'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Tau'</span>=&gt;<span class="src-str">'932'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Upsilon'</span>=&gt;<span class="src-str">'933'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Phi'</span>=&gt;<span class="src-str">'934'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Chi'</span>=&gt;<span class="src-str">'935'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Psi'</span>=&gt;<span class="src-str">'936'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Omega'</span>=&gt;<span class="src-str">'937'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'alpha'</span>=&gt;<span class="src-str">'945'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'beta'</span>=&gt;<span class="src-str">'946'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'gamma'</span>=&gt;<span class="src-str">'947'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'delta'</span>=&gt;<span class="src-str">'948'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'epsilon'</span>=&gt;<span class="src-str">'949'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'zeta'</span>=&gt;<span class="src-str">'950'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'eta'</span>=&gt;<span class="src-str">'951'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'theta'</span>=&gt;<span class="src-str">'952'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iota'</span>=&gt;<span class="src-str">'953'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'kappa'</span>=&gt;<span class="src-str">'954'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lambda'</span>=&gt;<span class="src-str">'955'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'mu'</span>=&gt;<span class="src-str">'956'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nu'</span>=&gt;<span class="src-str">'957'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'xi'</span>=&gt;<span class="src-str">'958'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'omicron'</span>=&gt;<span class="src-str">'959'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pi'</span>=&gt;<span class="src-str">'960'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rho'</span>=&gt;<span class="src-str">'961'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sigmaf'</span>=&gt;<span class="src-str">'962'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sigma'</span>=&gt;<span class="src-str">'963'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tau'</span>=&gt;<span class="src-str">'964'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'upsilon'</span>=&gt;<span class="src-str">'965'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'phi'</span>=&gt;<span class="src-str">'966'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'chi'</span>=&gt;<span class="src-str">'967'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'psi'</span>=&gt;<span class="src-str">'968'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'omega'</span>=&gt;<span class="src-str">'969'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thetasym'</span>=&gt;<span class="src-str">'977'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'upsih'</span>=&gt;<span class="src-str">'978'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'piv'</span>=&gt;<span class="src-str">'982'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bull'</span>=&gt;<span class="src-str">'8226'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hellip'</span>=&gt;<span class="src-str">'8230'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'prime'</span>=&gt;<span class="src-str">'8242'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Prime'</span>=&gt;<span class="src-str">'8243'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'oline'</span>=&gt;<span class="src-str">'8254'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'frasl'</span>=&gt;<span class="src-str">'8260'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'weierp'</span>=&gt;<span class="src-str">'8472'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'image'</span>=&gt;<span class="src-str">'8465'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'real'</span>=&gt;<span class="src-str">'8476'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'trade'</span>=&gt;<span class="src-str">'8482'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'alefsym'</span>=&gt;<span class="src-str">'8501'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'larr'</span>=&gt;<span class="src-str">'8592'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'uarr'</span>=&gt;<span class="src-str">'8593'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rarr'</span>=&gt;<span class="src-str">'8594'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'darr'</span>=&gt;<span class="src-str">'8595'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'harr'</span>=&gt;<span class="src-str">'8596'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'crarr'</span>=&gt;<span class="src-str">'8629'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lArr'</span>=&gt;<span class="src-str">'8656'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'uArr'</span>=&gt;<span class="src-str">'8657'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rArr'</span>=&gt;<span class="src-str">'8658'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dArr'</span>=&gt;<span class="src-str">'8659'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hArr'</span>=&gt;<span class="src-str">'8660'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'forall'</span>=&gt;<span class="src-str">'8704'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'part'</span>=&gt;<span class="src-str">'8706'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'exist'</span>=&gt;<span class="src-str">'8707'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'empty'</span>=&gt;<span class="src-str">'8709'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nabla'</span>=&gt;<span class="src-str">'8711'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isin'</span>=&gt;<span class="src-str">'8712'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'notin'</span>=&gt;<span class="src-str">'8713'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ni'</span>=&gt;<span class="src-str">'8715'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'prod'</span>=&gt;<span class="src-str">'8719'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sum'</span>=&gt;<span class="src-str">'8721'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'minus'</span>=&gt;<span class="src-str">'8722'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lowast'</span>=&gt;<span class="src-str">'8727'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'radic'</span>=&gt;<span class="src-str">'8730'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'prop'</span>=&gt;<span class="src-str">'8733'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'infin'</span>=&gt;<span class="src-str">'8734'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ang'</span>=&gt;<span class="src-str">'8736'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'and'</span>=&gt;<span class="src-str">'8743'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'or'</span>=&gt;<span class="src-str">'8744'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cap'</span>=&gt;<span class="src-str">'8745'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cup'</span>=&gt;<span class="src-str">'8746'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'int'</span>=&gt;<span class="src-str">'8747'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'there4'</span>=&gt;<span class="src-str">'8756'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sim'</span>=&gt;<span class="src-str">'8764'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cong'</span>=&gt;<span class="src-str">'8773'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'asymp'</span>=&gt;<span class="src-str">'8776'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ne'</span>=&gt;<span class="src-str">'8800'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'equiv'</span>=&gt;<span class="src-str">'8801'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'le'</span>=&gt;<span class="src-str">'8804'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ge'</span>=&gt;<span class="src-str">'8805'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sub'</span>=&gt;<span class="src-str">'8834'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup'</span>=&gt;<span class="src-str">'8835'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nsub'</span>=&gt;<span class="src-str">'8836'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sube'</span>=&gt;<span class="src-str">'8838'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'supe'</span>=&gt;<span class="src-str">'8839'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'oplus'</span>=&gt;<span class="src-str">'8853'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'otimes'</span>=&gt;<span class="src-str">'8855'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'perp'</span>=&gt;<span class="src-str">'8869'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sdot'</span>=&gt;<span class="src-str">'8901'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lceil'</span>=&gt;<span class="src-str">'8968'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rceil'</span>=&gt;<span class="src-str">'8969'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lfloor'</span>=&gt;<span class="src-str">'8970'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rfloor'</span>=&gt;<span class="src-str">'8971'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lang'</span>=&gt;<span class="src-str">'9001'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rang'</span>=&gt;<span class="src-str">'9002'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'loz'</span>=&gt;<span class="src-str">'9674'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'spades'</span>=&gt;<span class="src-str">'9824'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'clubs'</span>=&gt;<span class="src-str">'9827'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hearts'</span>=&gt;<span class="src-str">'9829'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'diams'</span>=&gt;<span class="src-str">'9830'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'apos'</span>=&gt;<span class="src-str">'39'</span><span class="src-sym">,&nbsp;&nbsp;</span><span class="src-str">'OElig'</span>=&gt;<span class="src-str">'338'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'oelig'</span>=&gt;<span class="src-str">'339'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Scaron'</span>=&gt;<span class="src-str">'352'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'scaron'</span>=&gt;<span class="src-str">'353'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Yuml'</span>=&gt;<span class="src-str">'376'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'circ'</span>=&gt;<span class="src-str">'710'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tilde'</span>=&gt;<span class="src-str">'732'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ensp'</span>=&gt;<span class="src-str">'8194'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'emsp'</span>=&gt;<span class="src-str">'8195'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thinsp'</span>=&gt;<span class="src-str">'8201'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'zwnj'</span>=&gt;<span class="src-str">'8204'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'zwj'</span>=&gt;<span class="src-str">'8205'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lrm'</span>=&gt;<span class="src-str">'8206'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rlm'</span>=&gt;<span class="src-str">'8207'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ndash'</span>=&gt;<span class="src-str">'8211'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'mdash'</span>=&gt;<span class="src-str">'8212'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lsquo'</span>=&gt;<span class="src-str">'8216'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rsquo'</span>=&gt;<span class="src-str">'8217'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sbquo'</span>=&gt;<span class="src-str">'8218'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ldquo'</span>=&gt;<span class="src-str">'8220'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rdquo'</span>=&gt;<span class="src-str">'8221'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdquo'</span>=&gt;<span class="src-str">'8222'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dagger'</span>=&gt;<span class="src-str">'8224'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Dagger'</span>=&gt;<span class="src-str">'8225'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'permil'</span>=&gt;<span class="src-str">'8240'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lsaquo'</span>=&gt;<span class="src-str">'8249'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rsaquo'</span>=&gt;<span class="src-str">'8250'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'euro'</span>=&gt;<span class="src-str">'8364'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nbsp'</span>=&gt;<span class="src-str">'160'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iexcl'</span>=&gt;<span class="src-str">'161'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cent'</span>=&gt;<span class="src-str">'162'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pound'</span>=&gt;<span class="src-str">'163'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'curren'</span>=&gt;<span class="src-str">'164'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'yen'</span>=&gt;<span class="src-str">'165'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'brvbar'</span>=&gt;<span class="src-str">'166'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sect'</span>=&gt;<span class="src-str">'167'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'uml'</span>=&gt;<span class="src-str">'168'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'copy'</span>=&gt;<span class="src-str">'169'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ordf'</span>=&gt;<span class="src-str">'170'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'laquo'</span>=&gt;<span class="src-str">'171'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'not'</span>=&gt;<span class="src-str">'172'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'shy'</span>=&gt;<span class="src-str">'173'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'reg'</span>=&gt;<span class="src-str">'174'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'macr'</span>=&gt;<span class="src-str">'175'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'deg'</span>=&gt;<span class="src-str">'176'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'plusmn'</span>=&gt;<span class="src-str">'177'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup2'</span>=&gt;<span class="src-str">'178'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup3'</span>=&gt;<span class="src-str">'179'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'acute'</span>=&gt;<span class="src-str">'180'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'micro'</span>=&gt;<span class="src-str">'181'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'para'</span>=&gt;<span class="src-str">'182'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'middot'</span>=&gt;<span class="src-str">'183'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cedil'</span>=&gt;<span class="src-str">'184'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'sup1'</span>=&gt;<span class="src-str">'185'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ordm'</span>=&gt;<span class="src-str">'186'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'raquo'</span>=&gt;<span class="src-str">'187'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'frac14'</span>=&gt;<span class="src-str">'188'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'frac12'</span>=&gt;<span class="src-str">'189'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'frac34'</span>=&gt;<span class="src-str">'190'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iquest'</span>=&gt;<span class="src-str">'191'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Agrave'</span>=&gt;<span class="src-str">'192'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Aacute'</span>=&gt;<span class="src-str">'193'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Acirc'</span>=&gt;<span class="src-str">'194'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Atilde'</span>=&gt;<span class="src-str">'195'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Auml'</span>=&gt;<span class="src-str">'196'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Aring'</span>=&gt;<span class="src-str">'197'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'AElig'</span>=&gt;<span class="src-str">'198'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Ccedil'</span>=&gt;<span class="src-str">'199'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Egrave'</span>=&gt;<span class="src-str">'200'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Eacute'</span>=&gt;<span class="src-str">'201'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Ecirc'</span>=&gt;<span class="src-str">'202'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Euml'</span>=&gt;<span class="src-str">'203'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Igrave'</span>=&gt;<span class="src-str">'204'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Iacute'</span>=&gt;<span class="src-str">'205'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Icirc'</span>=&gt;<span class="src-str">'206'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Iuml'</span>=&gt;<span class="src-str">'207'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ETH'</span>=&gt;<span class="src-str">'208'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Ntilde'</span>=&gt;<span class="src-str">'209'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Ograve'</span>=&gt;<span class="src-str">'210'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Oacute'</span>=&gt;<span class="src-str">'211'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Ocirc'</span>=&gt;<span class="src-str">'212'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Otilde'</span>=&gt;<span class="src-str">'213'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Ouml'</span>=&gt;<span class="src-str">'214'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'times'</span>=&gt;<span class="src-str">'215'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Oslash'</span>=&gt;<span class="src-str">'216'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Ugrave'</span>=&gt;<span class="src-str">'217'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Uacute'</span>=&gt;<span class="src-str">'218'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Ucirc'</span>=&gt;<span class="src-str">'219'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Uuml'</span>=&gt;<span class="src-str">'220'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'Yacute'</span>=&gt;<span class="src-str">'221'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'THORN'</span>=&gt;<span class="src-str">'222'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'szlig'</span>=&gt;<span class="src-str">'223'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'agrave'</span>=&gt;<span class="src-str">'224'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'aacute'</span>=&gt;<span class="src-str">'225'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'acirc'</span>=&gt;<span class="src-str">'226'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'atilde'</span>=&gt;<span class="src-str">'227'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'auml'</span>=&gt;<span class="src-str">'228'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'aring'</span>=&gt;<span class="src-str">'229'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'aelig'</span>=&gt;<span class="src-str">'230'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ccedil'</span>=&gt;<span class="src-str">'231'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'egrave'</span>=&gt;<span class="src-str">'232'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'eacute'</span>=&gt;<span class="src-str">'233'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ecirc'</span>=&gt;<span class="src-str">'234'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'euml'</span>=&gt;<span class="src-str">'235'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'igrave'</span>=&gt;<span class="src-str">'236'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iacute'</span>=&gt;<span class="src-str">'237'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'icirc'</span>=&gt;<span class="src-str">'238'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iuml'</span>=&gt;<span class="src-str">'239'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'eth'</span>=&gt;<span class="src-str">'240'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ntilde'</span>=&gt;<span class="src-str">'241'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ograve'</span>=&gt;<span class="src-str">'242'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'oacute'</span>=&gt;<span class="src-str">'243'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ocirc'</span>=&gt;<span class="src-str">'244'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'otilde'</span>=&gt;<span class="src-str">'245'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ouml'</span>=&gt;<span class="src-str">'246'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'divide'</span>=&gt;<span class="src-str">'247'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'oslash'</span>=&gt;<span class="src-str">'248'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ugrave'</span>=&gt;<span class="src-str">'249'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'uacute'</span>=&gt;<span class="src-str">'250'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ucirc'</span>=&gt;<span class="src-str">'251'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'uuml'</span>=&gt;<span class="src-str">'252'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'yacute'</span>=&gt;<span class="src-str">'253'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thorn'</span>=&gt;<span class="src-str">'254'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'yuml'</span>=&gt;<span class="src-str">'255'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a325"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>!=&nbsp;<span class="src-str">'#'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a326"></a>&nbsp;<span class="src-key">return&nbsp;</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'and_mark'</span><span class="src-sym">]&nbsp;</span>?&nbsp;<span class="src-str">&quot;\x06&quot;&nbsp;</span>:&nbsp;<span class="src-str">'&amp;'</span><span class="src-sym">)</span>.&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$U</span><span class="src-sym">[</span><span class="src-var">$t</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$t&nbsp;</span>:&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$N</span><span class="src-sym">[</span><span class="src-var">$t</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'named_entity'</span><span class="src-sym">]&nbsp;</span>?&nbsp;<span class="src-str">'#'</span>.&nbsp;<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hexdec_entity'</span><span class="src-sym">]&nbsp;</span>&gt;&nbsp;<span class="src-num">1&nbsp;</span>?&nbsp;<span class="src-str">'x'</span>.&nbsp;<span class="src-id">dechex</span><span class="src-sym">(</span><span class="src-var">$N</span><span class="src-sym">[</span><span class="src-var">$t</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$N</span><span class="src-sym">[</span><span class="src-var">$t</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">'amp;'</span>.&nbsp;<span class="src-var">$t</span><span class="src-sym">))</span>.&nbsp;<span class="src-str">';'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a327"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a328"></a><span class="src-key">if</span><span class="src-sym">((</span><span class="src-var">$n&nbsp;</span>=&nbsp;<a href="http://www.php.net/ctype_digit">ctype_digit</a><span class="src-sym">(</span><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">))&nbsp;</span>?&nbsp;<a href="http://www.php.net/intval">intval</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>:&nbsp;<a href="http://www.php.net/hexdec">hexdec</a><span class="src-sym">(</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">)))&nbsp;</span>&lt;&nbsp;<span class="src-num">9&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span><span class="src-var">$n&nbsp;</span>&gt;&nbsp;<span class="src-num">13&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$n&nbsp;</span>&lt;&nbsp;<span class="src-num">32</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$n&nbsp;</span>==&nbsp;<span class="src-num">11&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$n&nbsp;</span>==&nbsp;<span class="src-num">12&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span><span class="src-var">$n&nbsp;</span>&gt;&nbsp;<span class="src-num">126&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$n&nbsp;</span>&lt;&nbsp;<span class="src-num">160&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$n&nbsp;</span>!=&nbsp;<span class="src-num">133</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span><span class="src-var">$n&nbsp;</span>&gt;&nbsp;<span class="src-num">55295&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-var">$n&nbsp;</span>&lt;&nbsp;<span class="src-num">57344&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span><span class="src-var">$n&nbsp;</span>&gt;&nbsp;<span class="src-num">64975&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$n&nbsp;</span>&lt;&nbsp;<span class="src-num">64992</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$n&nbsp;</span>==&nbsp;<span class="src-num">65534&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$n&nbsp;</span>==&nbsp;<span class="src-num">65535&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$n&nbsp;</span>&gt;&nbsp;<span class="src-num">1114111</span><span class="src-sym">)))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a329"></a>&nbsp;<span class="src-key">return&nbsp;</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'and_mark'</span><span class="src-sym">]&nbsp;</span>?&nbsp;<span class="src-str">&quot;\x06&quot;&nbsp;</span>:&nbsp;<span class="src-str">'&amp;'</span><span class="src-sym">)</span>.&nbsp;<span class="src-str">&quot;</span><span class="src-str">amp;#{<span class="src-var">$t</span><span class="src-sym">}</span>;</span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a330"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a331"></a><span class="src-key">return&nbsp;</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'and_mark'</span><span class="src-sym">]&nbsp;</span>?&nbsp;<span class="src-str">&quot;\x06&quot;&nbsp;</span>:&nbsp;<span class="src-str">'&amp;'</span><span class="src-sym">)</span>.&nbsp;<span class="src-str">'#'</span>.&nbsp;<span class="src-sym">(((</span><a href="http://www.php.net/ctype_digit">ctype_digit</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hexdec_entity'</span><span class="src-sym">]&nbsp;</span>&lt;&nbsp;<span class="src-num">2</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">!</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hexdec_entity'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$n&nbsp;</span>:&nbsp;<span class="src-str">'x'</span>.&nbsp;<a href="http://www.php.net/dechex">dechex</a><span class="src-sym">(</span><span class="src-var">$n</span><span class="src-sym">))</span>.&nbsp;<span class="src-str">';'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a332"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a333"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a334"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a335"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_prot">hl_prot</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">,&nbsp;</span><span class="src-var">$c</span>=<span class="src-id">null</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a336"></a><span class="src-comm">//&nbsp;check&nbsp;URL&nbsp;scheme</span></div></li>
<li><div class="src-line"><a name="a337"></a><span class="src-key">global&nbsp;</span><span class="src-var">$C</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a338"></a><span class="src-var">$b&nbsp;</span>=&nbsp;<span class="src-var">$a&nbsp;</span>=&nbsp;<span class="src-str">''</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a339"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$c&nbsp;</span>==&nbsp;<span class="src-id">null</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$c&nbsp;</span>=&nbsp;<span class="src-str">'style'</span><span class="src-sym">;&nbsp;</span><span class="src-var">$b&nbsp;</span>=&nbsp;<span class="src-var">$p</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">;&nbsp;</span><span class="src-var">$a&nbsp;</span>=&nbsp;<span class="src-var">$p</span><span class="src-sym">[</span><span class="src-num">3</span><span class="src-sym">]</span><span class="src-sym">;&nbsp;</span><span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a340"></a><span class="src-var">$c&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$c</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$c</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'*'</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a341"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-str">'*'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">!</span><a href="http://www.php.net/strcspn">strcspn</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">,&nbsp;</span><span class="src-str">'#?;'</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-str">&quot;</span>{<span class="src-var">$b</span><span class="src-str"></span><span class="src-sym">}</span>{<span class="src-var">$p</span><span class="src-sym">}</span>{<span class="src-var">$a</span><span class="src-sym">}</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span><span class="src-sym">}&nbsp;</span><span class="src-comm">//&nbsp;All&nbsp;ok,&nbsp;frag,&nbsp;query,&nbsp;param</span></div></li>
<li><div class="src-line"><a name="a342"></a><span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^([a-z\d\-+.&amp;#;&nbsp;]+?)(:|&amp;#(58|x3a);|%3a|\\\\0{0,4}3a).`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$c</span><span class="src-sym">[</span><a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;Denied&nbsp;prot</span></div></li>
<li><div class="src-line"><a name="a343"></a>&nbsp;<span class="src-key">return&nbsp;</span><span class="src-str">&quot;</span>{<span class="src-var">$b</span><span class="src-str"></span><span class="src-sym">}</span>denied:{<span class="src-var">$p</span><span class="src-sym">}</span>{<span class="src-var">$a</span><span class="src-sym">}</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a344"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a345"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'abs_url'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a346"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'abs_url'</span><span class="src-sym">]&nbsp;</span>==&nbsp;-<span class="src-num">1&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>===&nbsp;<span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;Make&nbsp;url&nbsp;rel</span></div></li>
<li><div class="src-line"><a name="a347"></a>&nbsp;&nbsp;<span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a348"></a>&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;Make&nbsp;URL&nbsp;abs</span></div></li>
<li><div class="src-line"><a name="a349"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-num">2</span><span class="src-sym">)&nbsp;</span>==&nbsp;<span class="src-str">'//'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-str">':'</span><span class="src-sym">)</span>+<span class="src-num">1</span><span class="src-sym">)</span>.&nbsp;<span class="src-var">$p</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a350"></a>&nbsp;&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'/'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`(^.+?://[^/]+)(.*)`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'$1'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span><span class="src-sym">)</span>.&nbsp;<span class="src-var">$p</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a351"></a>&nbsp;&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span><a href="http://www.php.net/strcspn">strcspn</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">,&nbsp;</span><span class="src-str">'./'</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$p&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span>.&nbsp;<span class="src-var">$p</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a352"></a>&nbsp;&nbsp;<span class="src-key">else</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a353"></a>&nbsp;&nbsp;&nbsp;<a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^([a-zA-Z\d\-+.]+://[^/]+)(.*)`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'base_url'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a354"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`(?&lt;=/)\./`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span>.&nbsp;<span class="src-var">$p</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a355"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">while</span><span class="src-sym">(</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`(?&lt;=/)([^/]{3,}|[^/.]+?|\.[^/.]|[^/.]\.)/\.\./`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a356"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`(?&lt;=/)([^/]{3,}|[^/.]+?|\.[^/.]|[^/.]\.)/\.\./`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a357"></a>&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a358"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$p&nbsp;</span>=&nbsp;<span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span>.&nbsp;<span class="src-var">$p</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a359"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a360"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a361"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a362"></a><span class="src-key">return&nbsp;</span><span class="src-str">&quot;</span>{<span class="src-var">$b</span><span class="src-str"></span><span class="src-sym">}</span>{<span class="src-var">$p</span><span class="src-sym">}</span>{<span class="src-var">$a</span><span class="src-sym">}</span></span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a363"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a364"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a365"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a366"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_regex">hl_regex</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a367"></a><span class="src-comm">//&nbsp;?regex</span></div></li>
<li><div class="src-line"><a name="a368"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a369"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/ini_get">ini_get</a><span class="src-sym">(</span><span class="src-str">'track_errors'</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$o&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$php_errormsg</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$php_errormsg&nbsp;</span>:&nbsp;<span class="src-id">null</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a370"></a><span class="src-key">else</span><span class="src-sym">{</span><a href="http://www.php.net/ini_set">ini_set</a><span class="src-sym">(</span><span class="src-str">'track_errors'</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a371"></a>unset<span class="src-sym">(</span><span class="src-var">$php_errormsg</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a372"></a><span class="src-key">if</span><span class="src-sym">((</span><span class="src-var">$d&nbsp;</span>=&nbsp;<a href="http://www.php.net/ini_get">ini_get</a><span class="src-sym">(</span><span class="src-str">'display_errors'</span><span class="src-sym">)))</span><span class="src-sym">{</span><a href="http://www.php.net/ini_set">ini_set</a><span class="src-sym">(</span><span class="src-str">'display_errors'</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a373"></a><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-var">$p</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a374"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$d</span><span class="src-sym">)</span><span class="src-sym">{</span><a href="http://www.php.net/ini_set">ini_set</a><span class="src-sym">(</span><span class="src-str">'display_errors'</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a375"></a><span class="src-var">$r&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$php_errormsg</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">0&nbsp;</span>:&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a376"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$php_errormsg&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$o</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$o&nbsp;</span>:&nbsp;<span class="src-id">null</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a377"></a><span class="src-key">else</span><span class="src-sym">{</span><a href="http://www.php.net/ini_set">ini_set</a><span class="src-sym">(</span><span class="src-str">'track_errors'</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a378"></a><span class="src-key">return&nbsp;</span><span class="src-var">$r</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a379"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a380"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a381"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a382"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_spec">hl_spec</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a383"></a><span class="src-comm">//&nbsp;final&nbsp;$spec</span></div></li>
<li><div class="src-line"><a name="a384"></a><span class="src-var">$s&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a385"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\t&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\r&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'/&quot;(?&gt;(`.|[^&quot;])*)&quot;/sme'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'substr(str_replace(array(&quot;;&quot;,&nbsp;&quot;|&quot;,&nbsp;&quot;~&quot;,&nbsp;&quot;&nbsp;&quot;,&nbsp;&quot;,&quot;,&nbsp;&quot;/&quot;,&nbsp;&quot;(&quot;,&nbsp;&quot;)&quot;,&nbsp;\'`&quot;\'),&nbsp;array(&quot;\x01&quot;,&nbsp;&quot;\x02&quot;,&nbsp;&quot;\x03&quot;,&nbsp;&quot;\x04&quot;,&nbsp;&quot;\x05&quot;,&nbsp;&quot;\x06&quot;,&nbsp;&quot;\x07&quot;,&nbsp;&quot;\x08&quot;,&nbsp;&quot;\&quot;&quot;),&nbsp;&quot;$0&quot;),&nbsp;1,&nbsp;-1)'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)))</span><span class="src-sym">;&nbsp;</span></div></li>
<li><div class="src-line"><a name="a386"></a><span class="src-key">for</span><span class="src-sym">(</span><span class="src-var">$i&nbsp;</span>=&nbsp;<a href="http://www.php.net/count">count</a><span class="src-sym">((</span><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">';'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)))</span><span class="src-sym">;&nbsp;</span>--<span class="src-var">$i</span>&gt;=<span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a387"></a>&nbsp;<span class="src-var">$w&nbsp;</span>=&nbsp;<span class="src-var">$t</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a388"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$w</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>=&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$w</span><span class="src-sym">,&nbsp;</span><span class="src-str">'='</span><span class="src-sym">))&nbsp;</span>===&nbsp;<span class="src-id">false&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">!</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">((</span><span class="src-var">$a&nbsp;</span>=&nbsp;&nbsp;<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$w</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span>+<span class="src-num">1</span><span class="src-sym">))))</span><span class="src-sym">{</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a389"></a>&nbsp;<span class="src-var">$y&nbsp;</span>=&nbsp;<span class="src-var">$n&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a390"></a>&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">','</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">)&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a391"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^([a-z:\-\*]+)(?:\((.*?)\))?`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a392"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">((</span><span class="src-var">$x&nbsp;</span>=&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>==&nbsp;<span class="src-str">'-*'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$n</span><span class="src-sym">[</span><span class="src-str">'*'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a393"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'-'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$n</span><span class="src-sym">[</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$x</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a394"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a395"></a>&nbsp;&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">'/'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a396"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span><span class="src-var">$p&nbsp;</span>=&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">,&nbsp;</span><span class="src-str">'='</span><span class="src-sym">))&nbsp;</span>==&nbsp;<span class="src-num">0&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$p&nbsp;</span>&lt;&nbsp;<span class="src-num">5</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a397"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]</span><span class="src-sym">[</span><a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span><span class="src-sym">))</span><span class="src-sym">]&nbsp;</span>=&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\x01&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x02&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x03&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x04&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x05&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x06&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x07&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x08&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;;&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;|&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;~&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;&nbsp;&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;,&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;/&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;(&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;)&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span>+<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a398"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a399"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'match'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_regex">hl_regex</a><span class="src-sym">(</span><span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'match'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span>unset<span class="src-sym">(</span><span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'match'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a400"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'nomatch'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_regex">hl_regex</a><span class="src-sym">(</span><span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'nomatch'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span>unset<span class="src-sym">(</span><span class="src-var">$y</span><span class="src-sym">[</span><span class="src-var">$x</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'nomatch'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a401"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a402"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$y</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span><a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$n</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a403"></a>&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">','</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$w</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">))&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a404"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">((</span><span class="src-var">$v&nbsp;</span>=&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">))))</span><span class="src-sym">{</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a405"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$y</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$s</span><span class="src-sym">[</span><span class="src-var">$v</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$y</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a406"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$n</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$s</span><span class="src-sym">[</span><span class="src-var">$v</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'n'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$n</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a407"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a408"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a409"></a><span class="src-key">return&nbsp;</span><span class="src-var">$s</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a410"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a411"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a412"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a413"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_tag">hl_tag</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a414"></a><span class="src-comm">//&nbsp;tag/attribute&nbsp;handler</span></div></li>
<li><div class="src-line"><a name="a415"></a><span class="src-key">global&nbsp;</span><span class="src-var">$C</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a416"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<span class="src-var">$t</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a417"></a><span class="src-comm">//&nbsp;invalid&nbsp;&lt;&nbsp;&gt;</span></div></li>
<li><div class="src-line"><a name="a418"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t&nbsp;</span>==&nbsp;<span class="src-str">'&lt;&nbsp;'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-str">'&amp;lt;&nbsp;'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a419"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t&nbsp;</span>==&nbsp;<span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a420"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^&lt;(/?)([a-zA-Z][a-zA-Z1-6]*)([^&gt;]*?)\s?&gt;$`m'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a421"></a>&nbsp;<span class="src-key">return&nbsp;</span><a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a422"></a><span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'elements'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>=&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a423"></a>&nbsp;<span class="src-key">return&nbsp;</span><span class="src-sym">((</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'keep_bad'</span><span class="src-sym">]</span>%<span class="src-num">2</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a424"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a425"></a><span class="src-comm">//&nbsp;attr&nbsp;string</span></div></li>
<li><div class="src-line"><a name="a426"></a><span class="src-var">$a&nbsp;</span>=&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\r&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\t&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">3</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a427"></a><span class="src-comm">//&nbsp;tag&nbsp;transform</span></div></li>
<li><div class="src-line"><a name="a428"></a><span class="src-key">static&nbsp;</span><span class="src-var">$eD&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'center'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dir'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'menu'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'s'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'strike'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'u'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Deprecated</span></div></li>
<li><div class="src-line"><a name="a429"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]&nbsp;</span>&amp;&amp;&nbsp;isset<span class="src-sym">(</span><span class="src-var">$eD</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a430"></a>&nbsp;<span class="src-var">$trt&nbsp;</span>=&nbsp;<span class="src-id">hl_tag2</span><span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a431"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$e</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-sym">((</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'keep_bad'</span><span class="src-sym">]</span>%<span class="src-num">2</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a432"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a433"></a><span class="src-comm">//&nbsp;close&nbsp;tag</span></div></li>
<li><div class="src-line"><a name="a434"></a><span class="src-key">static&nbsp;</span><span class="src-var">$eE&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Empty&nbsp;ele</span></div></li>
<li><div class="src-line"><a name="a435"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a436"></a>&nbsp;<span class="src-key">return&nbsp;</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$eE</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-str">&quot;</span><span class="src-str">&lt;/<span class="src-var">$e</span>&gt;</span><span class="src-str">&quot;&nbsp;</span>:&nbsp;<span class="src-sym">((</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'keep_bad'</span><span class="src-sym">]</span><span class="src-sym">)</span>%<span class="src-num">2&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;gt;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a437"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a438"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a439"></a><span class="src-comm">//&nbsp;open&nbsp;tag&nbsp;&amp;&nbsp;attr</span></div></li>
<li><div class="src-line"><a name="a440"></a><span class="src-key">static&nbsp;</span><span class="src-var">$aN&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'abbr'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'accept-charset'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'accept'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'accesskey'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'action'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'align'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'caption'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h1'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h2'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h3'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h4'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h5'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h6'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'alt'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'archive'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'axis'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bgcolor'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'border'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bordercolor'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cellpadding'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cellspacing'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'char'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'charoff'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'charset'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'checked'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cite'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'blockquote'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'q'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'del'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ins'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'classid'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'clear'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'code'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'codebase'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'codetype'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'color'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cols'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colspan'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'compact'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'dir'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'menu'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'coords'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'data'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'datetime'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'del'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ins'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'declare'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'defer'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dir'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'disabled'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'enctype'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'face'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'flashvars'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'for'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'frame'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'frameborder'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'headers'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'height'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'href'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hreflang'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hspace'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ismap'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'language'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'longdesc'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'marginheight'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'marginwidth'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'maxlength'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'method'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'model'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'multiple'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'name'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nohref'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noshade'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nowrap'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onblur'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onchange'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onfocus'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onreset'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onselect'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onsubmit'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pluginspage'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pluginurl'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'prompt'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'readonly'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rel'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rev'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rows'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rowspan'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rules'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'scope'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'scrolling'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'selected'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'shape'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'size'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'span'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'src'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'standby'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'start'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'summary'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tabindex'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'target'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'type'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'usemap'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'valign'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tbody'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'value'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'valuetype'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'vspace'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'width'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pre'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'wmode'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'embed'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'xml:space'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'pre'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'style'</span>=&gt;<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Ele-specific</span></div></li>
<li><div class="src-line"><a name="a441"></a><span class="src-key">static&nbsp;</span><span class="src-var">$aNE&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'checked'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'compact'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'declare'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'defer'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'disabled'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ismap'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'multiple'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nohref'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noresize'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noshade'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nowrap'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'readonly'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'selected'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Empty</span></div></li>
<li><div class="src-line"><a name="a442"></a><span class="src-key">static&nbsp;</span><span class="src-var">$aNP&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'action'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cite'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'classid'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'codebase'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'data'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'href'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'longdesc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'model'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pluginspage'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pluginurl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'usemap'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Need&nbsp;scheme&nbsp;check;&nbsp;excludes&nbsp;style,&nbsp;on*&nbsp;&amp;&nbsp;src</span></div></li>
<li><div class="src-line"><a name="a443"></a><span class="src-key">static&nbsp;</span><span class="src-var">$aNU&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'class'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dir'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'id'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'lang'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'xml:lang'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onclick'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ondblclick'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onkeydown'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onkeypress'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onkeyup'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmousedown'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmousemove'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmouseout'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmouseover'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'onmouseup'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'applet'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'font'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'style'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'title'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">;&nbsp;</span><span class="src-comm">//&nbsp;Univ&nbsp;&amp;&nbsp;exceptions</span></div></li>
<li><div class="src-line"><a name="a444"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a445"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'lc_std_val'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a446"></a>&nbsp;<span class="src-comm">//&nbsp;predef&nbsp;attr&nbsp;vals&nbsp;for&nbsp;$eAL&nbsp;&amp;&nbsp;$aNE&nbsp;ele</span></div></li>
<li><div class="src-line"><a name="a447"></a>&nbsp;<span class="src-key">static&nbsp;</span><span class="src-var">$aNL&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'all'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'baseline'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bottom'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'center'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'char'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'checkbox'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'circle'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cols'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'data'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'default'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'file'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'get'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'groups'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hidden'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'image'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'justify'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'left'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ltr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'middle'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'none'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'password'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'poly'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'post'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'preserve'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'radio'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rect'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ref'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'reset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'right'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'row'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rowgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rows'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rtl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'submit'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'text'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'top'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a448"></a>&nbsp;<span class="src-key">static&nbsp;</span><span class="src-var">$eAL&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'area'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'col'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'xml:space'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a449"></a>&nbsp;<span class="src-var">$lcase&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$eAL</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">1&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a450"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a451"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a452"></a><span class="src-var">$depTr&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a453"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'no_deprecated_attr'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a454"></a>&nbsp;<span class="src-comm">//&nbsp;dep&nbsp;attr:applicable&nbsp;ele</span></div></li>
<li><div class="src-line"><a name="a455"></a>&nbsp;<span class="src-key">static&nbsp;</span><span class="src-var">$aND&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'align'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'caption'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h1'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h2'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h3'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h4'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h5'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h6'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bgcolor'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'border'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bordercolor'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'clear'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'compact'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'dl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'height'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hspace'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'language'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'name'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noshade'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nowrap'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'size'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'start'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'type'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'value'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'vspace'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'width'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pre'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a456"></a>&nbsp;<span class="src-key">static&nbsp;</span><span class="src-var">$eAD&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'a'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'caption'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h1'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h2'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h3'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h4'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h5'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h6'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pre'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a457"></a>&nbsp;<span class="src-var">$depTr&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$eAD</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-num">1&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a458"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a459"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a460"></a><span class="src-comm">//&nbsp;attr&nbsp;name-vals</span></div></li>
<li><div class="src-line"><a name="a461"></a><span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x01&quot;</span><span class="src-sym">)&nbsp;</span>!==&nbsp;<span class="src-id">false</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$a&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`\x01[^\x01]*\x01`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}&nbsp;</span><span class="src-comm">//&nbsp;No&nbsp;comment/CDATA&nbsp;sec</span></div></li>
<li><div class="src-line"><a name="a462"></a><span class="src-var">$mode&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;&nbsp;</span><span class="src-var">$a&nbsp;</span>=&nbsp;<a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;/'</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$aA&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a463"></a><span class="src-key">while</span><span class="src-sym">(</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a464"></a>&nbsp;<span class="src-var">$w&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a465"></a>&nbsp;<span class="src-key">switch</span><span class="src-sym">(</span><span class="src-var">$mode</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a466"></a>&nbsp;&nbsp;<span class="src-key">case&nbsp;</span><span class="src-num">0</span>:&nbsp;<span class="src-comm">//&nbsp;Name</span></div></li>
<li><div class="src-line"><a name="a467"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^[a-zA-Z][\-a-zA-Z:]+`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a468"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$nm&nbsp;</span>=&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a469"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$w&nbsp;</span>=&nbsp;<span class="src-var">$mode&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-var">$a&nbsp;</span>=&nbsp;<a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><a href="http://www.php.net/substr_replace">substr_replace</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">)))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a470"></a>&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a471"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-num">1</span>:</div></li>
<li><div class="src-line"><a name="a472"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'='</span><span class="src-sym">)</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;=</span></div></li>
<li><div class="src-line"><a name="a473"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$w&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-var">$mode&nbsp;</span>=&nbsp;<span class="src-num">2</span><span class="src-sym">;&nbsp;</span><span class="src-var">$a&nbsp;</span>=&nbsp;<a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">'=&nbsp;'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a474"></a>&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">else</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;No&nbsp;val</span></div></li>
<li><div class="src-line"><a name="a475"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$w&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-var">$mode&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;&nbsp;</span><span class="src-var">$a&nbsp;</span>=&nbsp;<a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a476"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$aA</span><span class="src-sym">[</span><span class="src-var">$nm</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">''</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a477"></a>&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a478"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;&nbsp;</span><span class="src-key">case&nbsp;</span><span class="src-num">2</span>:&nbsp;<span class="src-comm">//&nbsp;Val</span></div></li>
<li><div class="src-line"><a name="a479"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^&quot;[^&quot;]*&quot;`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">&quot;`^'[^']*'`&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">&quot;`^\s*[^\s\&quot;']+`&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a480"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$m&nbsp;</span>=&nbsp;<span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;&nbsp;</span><span class="src-var">$w&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;&nbsp;</span><span class="src-var">$mode&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;&nbsp;</span><span class="src-var">$a&nbsp;</span>=&nbsp;<a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><a href="http://www.php.net/substr_replace">substr_replace</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/strlen">strlen</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">)))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a481"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$aA</span><span class="src-sym">[</span><span class="src-var">$nm</span><span class="src-sym">]&nbsp;</span>=&nbsp;<a href="http://www.php.net/trim">trim</a><span class="src-sym">((</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'&quot;'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'\''</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">,&nbsp;</span><span class="src-num">1</span><span class="src-sym">,&nbsp;</span>-<span class="src-num">1</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$m</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a482"></a>&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a483"></a>&nbsp;&nbsp;<span class="src-key">break</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a484"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a485"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$w&nbsp;</span>==&nbsp;<span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;Parse&nbsp;errs,&nbsp;deal&nbsp;with&nbsp;space,&nbsp;&quot;&nbsp;&amp;&nbsp;'</span></div></li>
<li><div class="src-line"><a name="a486"></a>&nbsp;&nbsp;<span class="src-var">$a&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`^(?:&quot;[^&quot;]*(&quot;|$)|\'[^\']*(\'|$)|\S)*\s*`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a487"></a>&nbsp;&nbsp;<span class="src-var">$mode&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a488"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a489"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a490"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$mode&nbsp;</span>==&nbsp;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$aA</span><span class="src-sym">[</span><span class="src-var">$nm</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">''</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a491"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a492"></a><span class="src-comm">//&nbsp;clean&nbsp;attrs</span></div></li>
<li><div class="src-line"><a name="a493"></a><span class="src-key">global&nbsp;</span><span class="src-var">$S</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a494"></a><span class="src-var">$rl&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$S</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$S</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a495"></a><span class="src-var">$a&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$nfr&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a496"></a><span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$aA&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$k</span>=&gt;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a497"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(((</span>isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'deny_attribute'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'*'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'deny_attribute'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'deny_attribute'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span><span class="src-key">or&nbsp;</span>isset<span class="src-sym">(</span><span class="src-var">$rl</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">((</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$rl</span><span class="src-sym">[</span><span class="src-str">'n'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$rl</span><span class="src-sym">[</span><span class="src-str">'n'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'*'</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span><span class="src-key">or&nbsp;</span>isset<span class="src-sym">(</span><span class="src-var">$rl</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$aN</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$aNU</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$aNU</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a498"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$aNE</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$v&nbsp;</span>=&nbsp;<span class="src-var">$k</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a499"></a>&nbsp;&nbsp;<span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$lcase</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">((</span><span class="src-var">$e&nbsp;</span>!=&nbsp;<span class="src-str">'button'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$e&nbsp;</span>!=&nbsp;<span class="src-str">'input'</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'type'</span><span class="src-sym">))</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;Rather&nbsp;loose&nbsp;but&nbsp;?not&nbsp;cause&nbsp;issues</span></div></li>
<li><div class="src-line"><a name="a500"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$v&nbsp;</span>=&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$aNL</span><span class="src-sym">[</span><span class="src-sym">(</span><span class="src-var">$v2&nbsp;</span>=&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">))</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>?&nbsp;<span class="src-var">$v2&nbsp;</span>:&nbsp;<span class="src-var">$v</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a501"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a502"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'style'&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'style_pass'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a503"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-id">false&nbsp;</span>!==&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#'</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a504"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">static&nbsp;</span><span class="src-var">$sC&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;#x20;'</span>=&gt;<span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#32;'</span>=&gt;<span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x45;'</span>=&gt;<span class="src-str">'e'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#69;'</span>=&gt;<span class="src-str">'e'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x65;'</span>=&gt;<span class="src-str">'e'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#101;'</span>=&gt;<span class="src-str">'e'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x58;'</span>=&gt;<span class="src-str">'x'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#88;'</span>=&gt;<span class="src-str">'x'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x78;'</span>=&gt;<span class="src-str">'x'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#120;'</span>=&gt;<span class="src-str">'x'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x50;'</span>=&gt;<span class="src-str">'p'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#80;'</span>=&gt;<span class="src-str">'p'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x70;'</span>=&gt;<span class="src-str">'p'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#112;'</span>=&gt;<span class="src-str">'p'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x53;'</span>=&gt;<span class="src-str">'s'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#83;'</span>=&gt;<span class="src-str">'s'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x73;'</span>=&gt;<span class="src-str">'s'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#115;'</span>=&gt;<span class="src-str">'s'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x49;'</span>=&gt;<span class="src-str">'i'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#73;'</span>=&gt;<span class="src-str">'i'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x69;'</span>=&gt;<span class="src-str">'i'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#105;'</span>=&gt;<span class="src-str">'i'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x4f;'</span>=&gt;<span class="src-str">'o'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#79;'</span>=&gt;<span class="src-str">'o'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x6f;'</span>=&gt;<span class="src-str">'o'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#111;'</span>=&gt;<span class="src-str">'o'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x4e;'</span>=&gt;<span class="src-str">'n'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#78;'</span>=&gt;<span class="src-str">'n'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x6e;'</span>=&gt;<span class="src-str">'n'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#110;'</span>=&gt;<span class="src-str">'n'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x55;'</span>=&gt;<span class="src-str">'u'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#85;'</span>=&gt;<span class="src-str">'u'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x75;'</span>=&gt;<span class="src-str">'u'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#117;'</span>=&gt;<span class="src-str">'u'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x52;'</span>=&gt;<span class="src-str">'r'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#82;'</span>=&gt;<span class="src-str">'r'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x72;'</span>=&gt;<span class="src-str">'r'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#114;'</span>=&gt;<span class="src-str">'r'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x4c;'</span>=&gt;<span class="src-str">'l'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#76;'</span>=&gt;<span class="src-str">'l'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x6c;'</span>=&gt;<span class="src-str">'l'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#108;'</span>=&gt;<span class="src-str">'l'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x28;'</span>=&gt;<span class="src-str">'('</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#40;'</span>=&gt;<span class="src-str">'('</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x29;'</span>=&gt;<span class="src-str">')'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#41;'</span>=&gt;<span class="src-str">')'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x20;'</span>=&gt;<span class="src-str">':'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#32;'</span>=&gt;<span class="src-str">':'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x22;'</span>=&gt;<span class="src-str">'&quot;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#34;'</span>=&gt;<span class="src-str">'&quot;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x27;'</span>=&gt;<span class="src-str">&quot;'&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#39;'</span>=&gt;<span class="src-str">&quot;'&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x2f;'</span>=&gt;<span class="src-str">'/'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#47;'</span>=&gt;<span class="src-str">'/'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x2a;'</span>=&gt;<span class="src-str">'*'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#42;'</span>=&gt;<span class="src-str">'*'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#x5c;'</span>=&gt;<span class="src-str">'\\'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#92;'</span>=&gt;<span class="src-str">'\\'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a505"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$v&nbsp;</span>=&nbsp;<a href="http://www.php.net/strtr">strtr</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-var">$sC</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a506"></a>&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a507"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$v&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace_callback">preg_replace_callback</a><span class="src-sym">(</span><span class="src-str">'`(url(?:\()(?:&nbsp;)*(?:\'|&quot;|&amp;(?:quot|apos);)?)(.+)((?:\'|&quot;|&amp;(?:quot|apos);)?(?:&nbsp;)*(?:\)))`iS'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hl_prot'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a508"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$v&nbsp;</span>=&nbsp;<span class="src-sym">!</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'css_expression'</span><span class="src-sym">]&nbsp;</span>?&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`expression`i'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`\\\\\S|(/|(%2f))(\*|(%2a))`i'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">))&nbsp;</span>:&nbsp;<span class="src-var">$v</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a509"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$aNP</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$k</span><span class="src-sym">,&nbsp;</span><span class="src-str">'src'</span><span class="src-sym">)&nbsp;</span>!==&nbsp;<span class="src-id">false&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$k</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'o'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a510"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$v&nbsp;</span>=&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">&quot;\xad&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-sym">(</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;'</span><span class="src-sym">)&nbsp;</span>!==&nbsp;<span class="src-id">false&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&amp;#xad;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;#173;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;shy;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-var">$v</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a511"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$v&nbsp;</span>=&nbsp;<a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_prot">hl_prot</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-var">$k</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a512"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'href'</span><span class="src-sym">)</span><span class="src-sym">{&nbsp;</span><span class="src-comm">//&nbsp;X-spam</span></div></li>
<li><div class="src-line"><a name="a513"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_mail_spam'</span><span class="src-sym">]&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-str">'mailto:'</span><span class="src-sym">)&nbsp;</span>===&nbsp;<span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a514"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$v&nbsp;</span>=&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">'@'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/htmlspecialchars">htmlspecialchars</a><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_mail_spam'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a515"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a516"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$r1&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a517"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$r1</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-var">$r1</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a518"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-var">$r0&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'anti_link_spam'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a519"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$r0</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-var">$r0</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a520"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a521"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`\bnofollow\b`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]&nbsp;</span>.=&nbsp;<span class="src-str">'&nbsp;nofollow'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a522"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$aA</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a523"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`\bnofollow\b`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$aA</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$nfr&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a524"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">else</span><span class="src-sym">{</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'nofollow'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a525"></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a526"></a>&nbsp;&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a527"></a>&nbsp;&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a528"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a529"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$rl</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/is_array">is_array</a><span class="src-sym">(</span><span class="src-var">$rl</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-var">$v&nbsp;</span>=&nbsp;<a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_attrval">hl_attrval</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">,&nbsp;</span><span class="src-var">$rl</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span>===&nbsp;<span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a530"></a>&nbsp;&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]&nbsp;</span>=&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">'&quot;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&amp;quot;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a531"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a532"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a533"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$nfr</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'rel'</span><span class="src-sym">]</span>.&nbsp;<span class="src-str">'&nbsp;nofollow'&nbsp;</span>:&nbsp;<span class="src-str">'nofollow'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a534"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a535"></a><span class="src-comm">//&nbsp;rqd&nbsp;attr</span></div></li>
<li><div class="src-line"><a name="a536"></a><span class="src-key">static&nbsp;</span><span class="src-var">$eAR&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'area'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'alt'</span>=&gt;<span class="src-str">'area'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'bdo'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'dir'</span>=&gt;<span class="src-str">'ltr'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'action'</span>=&gt;<span class="src-str">''</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'img'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'src'</span>=&gt;<span class="src-str">''</span><span class="src-sym">,&nbsp;</span><span class="src-str">'alt'</span>=&gt;<span class="src-str">'image'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'name'</span>=&gt;<span class="src-str">''</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'label'</span>=&gt;<span class="src-str">''</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'param'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'name'</span>=&gt;<span class="src-str">''</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'type'</span>=&gt;<span class="src-str">'text/javascript'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'rows'</span>=&gt;<span class="src-str">'10'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'cols'</span>=&gt;<span class="src-str">'50'</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a537"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$eAR</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a538"></a>&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$eAR</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$k</span>=&gt;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a539"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$v&nbsp;</span>:&nbsp;<span class="src-var">$k</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a540"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a541"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a542"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a543"></a><span class="src-comm">//&nbsp;depr&nbsp;attrs</span></div></li>
<li><div class="src-line"><a name="a544"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$depTr</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a545"></a>&nbsp;<span class="src-var">$c&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a546"></a>&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$a&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$k</span>=&gt;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a547"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'style'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$aND</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">continue</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a548"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'align'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a549"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'align'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a550"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'img'&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">(</span><span class="src-var">$v&nbsp;</span>==&nbsp;<span class="src-str">'left'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$v&nbsp;</span>==&nbsp;<span class="src-str">'right'</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'float:&nbsp;'</span>.&nbsp;<span class="src-var">$v</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a551"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">elseif</span><span class="src-sym">((</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'div'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'table'</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$v&nbsp;</span>==&nbsp;<span class="src-str">'center'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'margin:&nbsp;auto'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a552"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">else</span><span class="src-sym">{</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'text-align:&nbsp;'</span>.&nbsp;<span class="src-var">$v</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a553"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'bgcolor'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a554"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'bgcolor'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a555"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'background-color:&nbsp;'</span>.&nbsp;<span class="src-var">$v</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a556"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'border'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a557"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'border'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span><span class="src-str">border:&nbsp;{<span class="src-var">$v</span><span class="src-sym">}</span>px</span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a558"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'bordercolor'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a559"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'bordercolor'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'border-color:&nbsp;'</span>.&nbsp;<span class="src-var">$v</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a560"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'clear'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a561"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'clear'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'clear:&nbsp;'</span>.&nbsp;<span class="src-sym">(</span><span class="src-var">$v&nbsp;</span>!=&nbsp;<span class="src-str">'all'&nbsp;</span>?&nbsp;<span class="src-var">$v&nbsp;</span>:&nbsp;<span class="src-str">'both'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a562"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'compact'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a563"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'compact'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'font-size:&nbsp;85%'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a564"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'height'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'width'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a565"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$k</span>.&nbsp;<span class="src-str">':&nbsp;'</span>.&nbsp;<span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>!=&nbsp;<span class="src-str">'*'&nbsp;</span>?&nbsp;<span class="src-var">$v</span>.&nbsp;<span class="src-sym">(</span><a href="http://www.php.net/ctype_digit">ctype_digit</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-str">'px'&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-str">'auto'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a566"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'hspace'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a567"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'hspace'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span><span class="src-str">margin-left:&nbsp;{<span class="src-var">$v</span><span class="src-sym">}</span>px;&nbsp;margin-right:&nbsp;{<span class="src-var">$v</span><span class="src-sym">}</span>px</span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a568"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'language'&nbsp;</span>&amp;&amp;&nbsp;<span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'type'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a569"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'language'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a570"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'type'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'text/'</span>.&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a571"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'name'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a572"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'no_deprecated_attr'</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-num">2&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>!=&nbsp;<span class="src-str">'a'&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$e&nbsp;</span>!=&nbsp;<span class="src-str">'map'</span><span class="src-sym">))</span><span class="src-sym">{</span>unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'name'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a573"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span>isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'id'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`[a-zA-Z][a-zA-Z\d.:_\-]*`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$v</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'id'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$v</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a574"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'noshade'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a575"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'noshade'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'border-style:&nbsp;none;&nbsp;border:&nbsp;0;&nbsp;background-color:&nbsp;gray;&nbsp;color:&nbsp;gray'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a576"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'nowrap'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a577"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'nowrap'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'white-space:&nbsp;nowrap'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a578"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'size'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a579"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'size'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'size:&nbsp;'</span>.&nbsp;<span class="src-var">$v</span>.&nbsp;<span class="src-str">'px'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a580"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'start'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'value'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a581"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a582"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'type'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a583"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'type'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a584"></a>&nbsp;&nbsp;&nbsp;<span class="src-key">static&nbsp;</span><span class="src-var">$ol_type&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'i'</span>=&gt;<span class="src-str">'lower-roman'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'I'</span>=&gt;<span class="src-str">'upper-roman'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'a'</span>=&gt;<span class="src-str">'lower-latin'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'A'</span>=&gt;<span class="src-str">'upper-latin'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'1'</span>=&gt;<span class="src-str">'decimal'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a585"></a>&nbsp;&nbsp;&nbsp;<span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'list-style-type:&nbsp;'</span>.&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$ol_type</span><span class="src-sym">[</span><span class="src-var">$v</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$ol_type</span><span class="src-sym">[</span><span class="src-var">$v</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-str">'decimal'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a586"></a>&nbsp;&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-var">$k&nbsp;</span>==&nbsp;<span class="src-str">'vspace'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a587"></a>&nbsp;&nbsp;&nbsp;unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'vspace'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span><span class="src-str">margin-top:&nbsp;{<span class="src-var">$v</span><span class="src-sym">}</span>px;&nbsp;margin-bottom:&nbsp;{<span class="src-var">$v</span><span class="src-sym">}</span>px</span><span class="src-str">&quot;</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a588"></a>&nbsp;&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a589"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a590"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$c</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a591"></a>&nbsp;&nbsp;<span class="src-var">$c&nbsp;</span>=&nbsp;<a href="http://www.php.net/implode">implode</a><span class="src-sym">(</span><span class="src-str">';&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$c</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a592"></a>&nbsp;&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'style'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'style'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/rtrim">rtrim</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'style'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;;'</span><span class="src-sym">)</span>.&nbsp;<span class="src-str">';&nbsp;'</span>.&nbsp;<span class="src-var">$c</span>.&nbsp;<span class="src-str">';'</span>:&nbsp;<span class="src-var">$c</span>.&nbsp;<span class="src-str">';'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a593"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a594"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a595"></a><span class="src-comm">//&nbsp;unique&nbsp;ID</span></div></li>
<li><div class="src-line"><a name="a596"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'unique_ids'</span><span class="src-sym">]&nbsp;</span>&amp;&amp;&nbsp;isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'id'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a597"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`^[A-Za-z][A-Za-z0-9_\-.:]*$`'</span><span class="src-sym">,&nbsp;</span><span class="src-sym">(</span><span class="src-var">$id&nbsp;</span>=&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'id'</span><span class="src-sym">]</span><span class="src-sym">))&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'hl_Ids'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$id</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'unique_ids'</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">{</span>unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'id'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a598"></a>&nbsp;<span class="src-sym">}</span><span class="src-key">else</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a599"></a>&nbsp;&nbsp;<span class="src-key">while</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'hl_Ids'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-var">$id</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-var">$id&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'unique_ids'</span><span class="src-sym">]</span>.&nbsp;<span class="src-var">$id</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a600"></a>&nbsp;&nbsp;<span class="src-var">$GLOBALS</span><span class="src-sym">[</span><span class="src-str">'hl_Ids'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'id'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$id</span><span class="src-sym">)</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a601"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a602"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a603"></a><span class="src-comm">//&nbsp;xml:lang</span></div></li>
<li><div class="src-line"><a name="a604"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]&nbsp;</span>&amp;&amp;&nbsp;isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'lang'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a605"></a>&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'lang'</span><span class="src-sym">]</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a606"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'xml:lang'</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-num">2</span><span class="src-sym">)</span><span class="src-sym">{</span>unset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'lang'</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a607"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a608"></a><span class="src-comm">//&nbsp;for&nbsp;transformed&nbsp;tag</span></div></li>
<li><div class="src-line"><a name="a609"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$trt</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a610"></a>&nbsp;<span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'style'</span><span class="src-sym">]&nbsp;</span>=&nbsp;isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'style'</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/rtrim">rtrim</a><span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-str">'style'</span><span class="src-sym">]</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;;'</span><span class="src-sym">)</span>.&nbsp;<span class="src-str">';&nbsp;'</span>.&nbsp;<span class="src-var">$trt&nbsp;</span>:&nbsp;<span class="src-var">$trt</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a611"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a612"></a><span class="src-comm">//&nbsp;return&nbsp;with&nbsp;empty&nbsp;ele&nbsp;/</span></div></li>
<li><div class="src-line"><a name="a613"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-key">empty</span><span class="src-sym">(</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook_tag'</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a614"></a>&nbsp;<span class="src-var">$aA&nbsp;</span>=&nbsp;<span class="src-str">''</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a615"></a>&nbsp;<span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$a&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$k</span>=&gt;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$aA&nbsp;</span>.=&nbsp;<span class="src-str">&quot;</span><span class="src-str">&nbsp;{<span class="src-var">$k</span><span class="src-sym">}</span>=\&quot;{<span class="src-var">$v</span><span class="src-sym">}</span>\&quot;</span><span class="src-str">&quot;</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a616"></a>&nbsp;<span class="src-key">return&nbsp;</span><span class="src-str">&quot;</span><span class="src-str">&lt;{<span class="src-var">$e</span><span class="src-sym">}</span>{<span class="src-var">$aA</span><span class="src-sym">}</span></span><span class="src-str">&quot;</span>.&nbsp;<span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$eE</span><span class="src-sym">[</span><span class="src-var">$e</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-str">'&nbsp;/'&nbsp;</span>:&nbsp;<span class="src-str">''</span><span class="src-sym">)</span>.&nbsp;<span class="src-str">'&gt;'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a617"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a618"></a><span class="src-key">else</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook_tag'</span><span class="src-sym">]</span><span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a619"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a620"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a621"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a622"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_tag2">hl_tag2</a><span class="src-sym">(</span><span class="src-sym">&amp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-sym">&amp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span>=<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a623"></a><span class="src-comm">//&nbsp;transform&nbsp;tag</span></div></li>
<li><div class="src-line"><a name="a624"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'center'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-str">'div'</span><span class="src-sym">;&nbsp;</span><span class="src-key">return&nbsp;</span><span class="src-str">'text-align:&nbsp;center;'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a625"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'dir'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'menu'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-str">'ul'</span><span class="src-sym">;&nbsp;</span><span class="src-key">return&nbsp;</span><span class="src-str">''</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a626"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'s'&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'strike'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-str">'span'</span><span class="src-sym">;&nbsp;</span><span class="src-key">return&nbsp;</span><span class="src-str">'text-decoration:&nbsp;line-through;'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a627"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'u'</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-str">'span'</span><span class="src-sym">;&nbsp;</span><span class="src-key">return&nbsp;</span><span class="src-str">'text-decoration:&nbsp;underline;'</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a628"></a><span class="src-key">static&nbsp;</span><span class="src-var">$fs&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'0'</span>=&gt;<span class="src-str">'xx-small'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'1'</span>=&gt;<span class="src-str">'xx-small'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'2'</span>=&gt;<span class="src-str">'small'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'3'</span>=&gt;<span class="src-str">'medium'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'4'</span>=&gt;<span class="src-str">'large'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'5'</span>=&gt;<span class="src-str">'x-large'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'6'</span>=&gt;<span class="src-str">'xx-large'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'7'</span>=&gt;<span class="src-str">'300%'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'-1'</span>=&gt;<span class="src-str">'smaller'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'-2'</span>=&gt;<span class="src-str">'60%'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'+1'</span>=&gt;<span class="src-str">'larger'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'+2'</span>=&gt;<span class="src-str">'150%'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'+3'</span>=&gt;<span class="src-str">'200%'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'+4'</span>=&gt;<span class="src-str">'300%'</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a629"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$e&nbsp;</span>==&nbsp;<span class="src-str">'font'</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a630"></a>&nbsp;<span class="src-var">$a2&nbsp;</span>=&nbsp;<span class="src-str">''</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a631"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-id">preg_match</span><span class="src-sym">(</span><span class="src-str">'`face\s*=\s*(\'|&quot;)([^=]+?)\\1`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)&nbsp;</span><span class="src-key">or&nbsp;</span><span class="src-id">preg_match</span><span class="src-sym">(</span><span class="src-str">'`face\s*=\s*([^&quot;])(\S+)`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a632"></a>&nbsp;&nbsp;<span class="src-var">$a2&nbsp;</span>.=&nbsp;<span class="src-str">'&nbsp;font-family:&nbsp;'</span>.&nbsp;<span class="src-id">str_replace</span><span class="src-sym">(</span><span class="src-str">'&quot;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'\''</span><span class="src-sym">,&nbsp;</span><span class="src-id">trim</span><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">))</span>.&nbsp;<span class="src-str">';'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a633"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a634"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`color\s*=\s*(\'|&quot;)?(.+?)(\\1|\s|$)`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a635"></a>&nbsp;&nbsp;<span class="src-var">$a2&nbsp;</span>.=&nbsp;<span class="src-str">'&nbsp;color:&nbsp;'</span>.&nbsp;<a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">)</span>.&nbsp;<span class="src-str">';'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a636"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a637"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`size\s*=\s*(\'|&quot;)?(.+?)(\\1|\s|$)`i'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$a</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)&nbsp;</span>&amp;&amp;&nbsp;isset<span class="src-sym">(</span><span class="src-var">$fs</span><span class="src-sym">[</span><span class="src-sym">(</span><span class="src-var">$m&nbsp;</span>=&nbsp;<a href="http://www.php.net/trim">trim</a><span class="src-sym">(</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">2</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a638"></a>&nbsp;&nbsp;<span class="src-var">$a2&nbsp;</span>.=&nbsp;<span class="src-str">'&nbsp;font-size:&nbsp;'</span>.&nbsp;<span class="src-var">$fs</span><span class="src-sym">[</span><span class="src-var">$m</span><span class="src-sym">]</span>.&nbsp;<span class="src-str">';'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a639"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a640"></a>&nbsp;<span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-str">'span'</span><span class="src-sym">;&nbsp;</span><span class="src-key">return&nbsp;</span><a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><span class="src-var">$a2</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a641"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a642"></a><span class="src-key">if</span><span class="src-sym">(</span><span class="src-var">$t&nbsp;</span>==&nbsp;<span class="src-num">2</span><span class="src-sym">)</span><span class="src-sym">{</span><span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;&nbsp;</span><span class="src-key">return&nbsp;</span><span class="src-num">0</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a643"></a><span class="src-key">return&nbsp;</span><span class="src-str">''</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a644"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a645"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a646"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a647"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_tidy">hl_tidy</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$w</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a648"></a><span class="src-comm">//&nbsp;Tidy/compact&nbsp;HTM</span></div></li>
<li><div class="src-line"><a name="a649"></a><span class="src-key">if</span><span class="src-sym">(</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-str">'&nbsp;pre,script,textarea'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$p</span>,</span><span class="src-str">&quot;</span><span class="src-sym">))</span><span class="src-sym">{</span><span class="src-key">return&nbsp;</span><span class="src-var">$t</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a650"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">'&nbsp;&lt;/'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&lt;/'</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'`(&lt;\w[^&gt;]*(?&lt;!/)&gt;)\s+`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'`\s+`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'`(&lt;\w[^&gt;]*(?&lt;!/)&gt;)&nbsp;`'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&nbsp;$1'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'$1'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/preg_replace_callback">preg_replace_callback</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'`(&lt;(!\[CDATA\[))(.+?)(\]\]&gt;)`sm'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'`(&lt;(!--))(.+?)(--&gt;)`sm'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'`(&lt;(pre|script|textarea).*?&gt;)(.+?)(&lt;/\2&gt;)`sm'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/create_function">create_function</a><span class="src-sym">(</span><span class="src-str">'$m'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'return&nbsp;$m[1].&nbsp;str_replace(array(&quot;&lt;&quot;,&nbsp;&quot;&gt;&quot;,&nbsp;&quot;\n&quot;,&nbsp;&quot;\r&quot;,&nbsp;&quot;\t&quot;,&nbsp;&quot;&nbsp;&quot;),&nbsp;array(&quot;\x01&quot;,&nbsp;&quot;\x02&quot;,&nbsp;&quot;\x03&quot;,&nbsp;&quot;\x04&quot;,&nbsp;&quot;\x05&quot;,&nbsp;&quot;\x07&quot;),&nbsp;$m[3]).&nbsp;$m[4];'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a651"></a><span class="src-key">if</span><span class="src-sym">((</span><span class="src-var">$w&nbsp;</span>=&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><span class="src-var">$w</span><span class="src-sym">))&nbsp;</span>==&nbsp;-<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a652"></a>&nbsp;<span class="src-key">return&nbsp;</span><a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\x01&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x02&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x03&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x04&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x05&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x07&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\r&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\t&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a653"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a654"></a><span class="src-var">$s&nbsp;</span>=&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str">&nbsp;<span class="src-var">$w</span></span><span class="src-str">&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'t'</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-str">&quot;\t&quot;&nbsp;</span>:&nbsp;<span class="src-str">'&nbsp;'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a655"></a><span class="src-var">$s&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`\d`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$w</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/str_repeat">str_repeat</a><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]</span><span class="src-sym">)&nbsp;</span>:&nbsp;<a href="http://www.php.net/str_repeat">str_repeat</a><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-sym">(</span><span class="src-var">$s&nbsp;</span>==&nbsp;<span class="src-str">&quot;\t&quot;&nbsp;</span>?&nbsp;<span class="src-num">1&nbsp;</span>:&nbsp;<span class="src-num">2</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a656"></a><span class="src-var">$n&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_match">preg_match</a><span class="src-sym">(</span><span class="src-str">'`[ts]([1-9])`'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$w</span><span class="src-sym">,&nbsp;</span><span class="src-var">$m</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-var">$m</span><span class="src-sym">[</span><span class="src-num">1</span><span class="src-sym">]&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a657"></a><span class="src-var">$a&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'br'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a658"></a><span class="src-var">$b&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'button'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'input'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'option'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a659"></a><span class="src-var">$c&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'caption'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dd'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dt'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h1'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h2'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h3'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h4'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h5'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'h6'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'isindex'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'label'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'legend'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'li'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'object'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'p'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'pre'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'td'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'textarea'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'th'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a660"></a><span class="src-var">$d&nbsp;</span>=&nbsp;<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'address'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'blockquote'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'center'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'colgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dir'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'div'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'dl'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'fieldset'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'form'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'hr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'iframe'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'map'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'menu'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'noscript'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ol'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'optgroup'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rbc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'rtc'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ruby'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'script'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'select'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'table'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tfoot'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'thead'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'tr'</span>=&gt;<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ul'</span>=&gt;<span class="src-num">1</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a661"></a><a href="http://www.php.net/ob_start">ob_start</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a662"></a><span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$d</span><span class="src-sym">[</span><span class="src-var">$p</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span>echo&nbsp;<a href="http://www.php.net/str_repeat">str_repeat</a><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span>++<span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a663"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a664"></a>echo&nbsp;<a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><a href="http://www.php.net/array_shift">array_shift</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a665"></a><span class="src-key">for</span><span class="src-sym">(</span><span class="src-var">$i</span>=-<span class="src-num">1</span><span class="src-sym">,&nbsp;</span><span class="src-var">$j</span>=<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span>++<span class="src-var">$i</span>&lt;<span class="src-var">$j</span><span class="src-sym">;</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a666"></a>&nbsp;<span class="src-var">$r&nbsp;</span>=&nbsp;<span class="src-str">''</span><span class="src-sym">;&nbsp;</span>list<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$r</span><span class="src-sym">)&nbsp;</span>=&nbsp;<a href="http://www.php.net/explode">explode</a><span class="src-sym">(</span><span class="src-str">'&gt;'</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">[</span><span class="src-var">$i</span><span class="src-sym">]</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a667"></a>&nbsp;<span class="src-var">$x&nbsp;</span>=&nbsp;<span class="src-var">$e</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>==&nbsp;<span class="src-str">'/'&nbsp;</span>?&nbsp;<span class="src-num">0&nbsp;</span>:&nbsp;<span class="src-sym">(</span><a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span>-<span class="src-num">1</span><span class="src-sym">)&nbsp;</span>==&nbsp;<span class="src-str">'/'&nbsp;</span>?&nbsp;<span class="src-num">1&nbsp;</span>:&nbsp;<span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">[</span><span class="src-num">0</span><span class="src-sym">]&nbsp;</span>!=&nbsp;<span class="src-str">'!'&nbsp;</span>?&nbsp;<span class="src-num">2&nbsp;</span>:&nbsp;-<span class="src-num">1</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a668"></a>&nbsp;<span class="src-var">$y&nbsp;</span>=&nbsp;<span class="src-sym">!</span><span class="src-var">$x&nbsp;</span>?&nbsp;<a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-str">'/'</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-sym">(</span><span class="src-var">$x&nbsp;</span>&gt;&nbsp;<span class="src-num">0&nbsp;</span>?&nbsp;<a href="http://www.php.net/substr">substr</a><span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-num">0</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/strcspn">strcspn</a><span class="src-sym">(</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">))&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a669"></a>&nbsp;<span class="src-var">$e&nbsp;</span>=&nbsp;<span class="src-str">&quot;</span><span class="src-str">&lt;<span class="src-var">$e</span>&gt;</span><span class="src-str">&quot;</span><span class="src-sym">;&nbsp;</span></div></li>
<li><div class="src-line"><a name="a670"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$d</span><span class="src-sym">[</span><span class="src-var">$y</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a671"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">{</span>echo&nbsp;<span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/str_repeat">str_repeat</a><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span>--<span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$e</span>\n</span><span class="src-str">&quot;</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/str_repeat">str_repeat</a><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a672"></a>&nbsp;&nbsp;<span class="src-key">else</span><span class="src-sym">{</span>echo&nbsp;<span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/str_repeat">str_repeat</a><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;</span><span class="src-str"><span class="src-var">$e</span>\n</span><span class="src-str">&quot;</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/str_repeat">str_repeat</a><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-sym">(</span><span class="src-var">$x&nbsp;</span>!=&nbsp;<span class="src-num">1&nbsp;</span>?&nbsp;++<span class="src-var">$n&nbsp;</span>:&nbsp;<span class="src-var">$n</span><span class="src-sym">))</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a673"></a>&nbsp;&nbsp;echo&nbsp;<a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><span class="src-var">$r</span><span class="src-sym">)</span><span class="src-sym">;&nbsp;</span><span class="src-key">continue</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a674"></a>&nbsp;<span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a675"></a>&nbsp;<span class="src-var">$f&nbsp;</span>=&nbsp;<span class="src-str">&quot;\n&quot;</span>.&nbsp;<a href="http://www.php.net/str_repeat">str_repeat</a><span class="src-sym">(</span><span class="src-var">$s</span><span class="src-sym">,&nbsp;</span><span class="src-var">$n</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a676"></a>&nbsp;<span class="src-key">if</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$c</span><span class="src-sym">[</span><span class="src-var">$y</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a677"></a>&nbsp;&nbsp;<span class="src-key">if</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$x</span><span class="src-sym">)</span><span class="src-sym">{</span>echo&nbsp;<span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$f</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><span class="src-var">$r</span><span class="src-sym">)</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a678"></a>&nbsp;&nbsp;<span class="src-key">else</span><span class="src-sym">{</span>echo&nbsp;<span class="src-var">$f</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$r</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a679"></a>&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$b</span><span class="src-sym">[</span><span class="src-var">$y</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span>echo&nbsp;<span class="src-var">$f</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$r</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a680"></a>&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span>isset<span class="src-sym">(</span><span class="src-var">$a</span><span class="src-sym">[</span><span class="src-var">$y</span><span class="src-sym">]</span><span class="src-sym">))</span><span class="src-sym">{</span>echo&nbsp;<span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$f</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><span class="src-var">$r</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a681"></a>&nbsp;<span class="src-sym">}</span><span class="src-key">elseif</span><span class="src-sym">(</span><span class="src-sym">!</span><span class="src-var">$y</span><span class="src-sym">)</span><span class="src-sym">{</span>echo&nbsp;<span class="src-var">$f</span><span class="src-sym">,&nbsp;</span><span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$f</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/ltrim">ltrim</a><span class="src-sym">(</span><span class="src-var">$r</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a682"></a>&nbsp;<span class="src-sym">}</span><span class="src-key">else</span><span class="src-sym">{</span>echo&nbsp;<span class="src-var">$e</span><span class="src-sym">,&nbsp;</span><span class="src-var">$r</span><span class="src-sym">;</span><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a683"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a684"></a><span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/preg_replace">preg_replace</a><span class="src-sym">(</span><span class="src-str">'`[\n]\s*?[\n]+`'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/ob_get_contents">ob_get_contents</a><span class="src-sym">(</span><span class="src-sym">))</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a685"></a><a href="http://www.php.net/ob_end_clean">ob_end_clean</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a686"></a><span class="src-key">if</span><span class="src-sym">((</span><span class="src-var">$l&nbsp;</span>=&nbsp;<a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str">&nbsp;<span class="src-var">$w</span></span><span class="src-str">&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'r'</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-sym">(</span><a href="http://www.php.net/strpos">strpos</a><span class="src-sym">(</span><span class="src-str">&quot;</span><span class="src-str">&nbsp;<span class="src-var">$w</span></span><span class="src-str">&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'n'</span><span class="src-sym">)&nbsp;</span>?&nbsp;<span class="src-str">&quot;\r\n&quot;&nbsp;</span>:&nbsp;<span class="src-str">&quot;\r&quot;</span><span class="src-sym">)&nbsp;</span>:&nbsp;<span class="src-num">0</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a687"></a>&nbsp;<span class="src-var">$t&nbsp;</span>=&nbsp;<a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-var">$l</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a688"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a689"></a><span class="src-key">return&nbsp;</span><a href="http://www.php.net/str_replace">str_replace</a><span class="src-sym">(</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">&quot;\x01&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x02&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x03&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x04&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x05&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\x07&quot;</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'&lt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&gt;'</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\n&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\r&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">&quot;\t&quot;</span><span class="src-sym">,&nbsp;</span><span class="src-str">'&nbsp;'</span><span class="src-sym">)</span><span class="src-sym">,&nbsp;</span><span class="src-var">$t</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a690"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a691"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a692"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a693"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhl_version">hl_version</a><span class="src-sym">(</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a694"></a><span class="src-comm">//&nbsp;rel</span></div></li>
<li><div class="src-line"><a name="a695"></a><span class="src-key">return&nbsp;</span><span class="src-str">'1.1.9.1'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a696"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a697"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a698"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a699"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionkses">kses</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$h</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span>=<span class="src-key">array</span><span class="src-sym">(</span><span class="src-str">'http'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'https'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'ftp'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'news'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'nntp'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'telnet'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'gopher'</span><span class="src-sym">,&nbsp;</span><span class="src-str">'mailto'</span><span class="src-sym">))</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a700"></a><span class="src-comm">//&nbsp;kses&nbsp;compat</span></div></li>
<li><div class="src-line"><a name="a701"></a><span class="src-key">foreach</span><span class="src-sym">(</span><span class="src-var">$h&nbsp;</span><span class="src-key">as&nbsp;</span><span class="src-var">$k</span>=&gt;<span class="src-var">$v</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a702"></a>&nbsp;<span class="src-var">$h</span><span class="src-sym">[</span><span class="src-var">$k</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'n'</span><span class="src-sym">]</span><span class="src-sym">[</span><span class="src-str">'*'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a703"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a704"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'cdata'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'comment'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'make_tag_strict'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'no_deprecated_attr'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'unique_ids'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">0</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a705"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'keep_bad'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-num">1</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a706"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'elements'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<a href="http://www.php.net/count">count</a><span class="src-sym">(</span><span class="src-var">$h</span><span class="src-sym">)&nbsp;</span>?&nbsp;<a href="http://www.php.net/strtolower">strtolower</a><span class="src-sym">(</span><a href="http://www.php.net/implode">implode</a><span class="src-sym">(</span><span class="src-str">','</span><span class="src-sym">,&nbsp;</span><a href="http://www.php.net/array_keys">array_keys</a><span class="src-sym">(</span><span class="src-var">$h</span><span class="src-sym">)))&nbsp;</span>:&nbsp;<span class="src-str">'-*'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a707"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'hook'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'kses_hook'</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a708"></a><span class="src-var">$C</span><span class="src-sym">[</span><span class="src-str">'schemes'</span><span class="src-sym">]&nbsp;</span>=&nbsp;<span class="src-str">'*:'</span>.&nbsp;<a href="http://www.php.net/implode">implode</a><span class="src-sym">(</span><span class="src-str">','</span><span class="src-sym">,&nbsp;</span><span class="src-var">$p</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a709"></a><span class="src-key">return&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionhtmLawed">htmLawed</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-var">$C</span><span class="src-sym">,&nbsp;</span><span class="src-var">$h</span><span class="src-sym">)</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a710"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a711"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a712"></a>&nbsp;</div></li>
<li><div class="src-line"><a name="a713"></a><span class="src-key">function&nbsp;</span><a href="../MooKit/_codeCore---php---htmLawed1.1.9.1.php.html#functionkses_hook">kses_hook</a><span class="src-sym">(</span><span class="src-var">$t</span><span class="src-sym">,&nbsp;</span><span class="src-sym">&amp;</span><span class="src-var">$C</span><span class="src-sym">,&nbsp;</span><span class="src-sym">&amp;</span><span class="src-var">$S</span><span class="src-sym">)</span><span class="src-sym">{</span></div></li>
<li><div class="src-line"><a name="a714"></a><span class="src-comm">//&nbsp;kses&nbsp;compat</span></div></li>
<li><div class="src-line"><a name="a715"></a><span class="src-key">return&nbsp;</span><span class="src-var">$t</span><span class="src-sym">;</span></div></li>
<li><div class="src-line"><a name="a716"></a><span class="src-comm">//&nbsp;eof</span></div></li>
<li><div class="src-line"><a name="a717"></a><span class="src-sym">}</span></div></li>
<li><div class="src-line"><a name="a718"></a><span class="src-php">?&gt;</span></div></li>
</ol></div>
</div>
	<p class="notes" id="credit">
		Documentation generated on Thu, 13 May 2010 22:58:40 -0400 by <a href="http://www.phpdoc.org" target="_blank">phpDocumentor 1.4.3</a>
	</p>
	</body>
</html>